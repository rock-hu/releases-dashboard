# 4.1.2

## release on 20240327

## description

## changes

‚≠ê New Features

* Add properties to disable filters if needed <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3310" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3310/hovercard">#3310</a>
* Make WeightCalculatorWebFilter random supplier aware of ServerWebExchange <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3298" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3298/hovercard">#3298</a>
* Spring cloud gateway MVC : add parameters to disable adding Forwarded header <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3238" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3238/hovercard">#3238</a>
* Make STRATEGY_KEY public in DedupeResonseHeader filter <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3203" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3203/hovercard">#3203</a>
* Gateway Server MVC support for AOT <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3171" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3171/hovercard">#3171</a>
* Update dashboard to Grafana 9.x <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3136" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3136/hovercard">#3136</a>
* Allow forcing order of filters through Java DSL configuration. <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3134" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3134/hovercard">#3134</a>
* Add a new method that returns a Mono. <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2993" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2993/hovercard">#2993</a>
* Add option to disable <code>RouteRefreshListener</code> <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2958" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2958/hovercard">#2958</a>
* Fixes <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1677852670" data-permission-text="Title is private" data-url="https://github.com/spring-cloud/spring-cloud-gateway/issues/2933" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2933/hovercard" href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2933">gh-2933</a> GatewayFilter support <code>@Order</code> annotation <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2934" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2934/hovercard">#2934</a>
* Add <code>@Order</code> support for GlobalFilter <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2805" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2805/hovercard">#2805</a>
* [<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1360798217" data-permission-text="Title is private" data-url="https://github.com/spring-cloud/spring-cloud-gateway/issues/2720" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2720/hovercard" href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2720">#2720</a>]Improve ReactiveLoadBalancerClientFilter implementation so tha‚Ä¶ <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2721" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2721/hovercard">#2721</a>

üêû Bug Fixes

* Fix incorrect package identifier in IsoOffsetDateTimeConverter (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2146862945" data-permission-text="Title is private" data-url="https://github.com/spring-cloud/spring-cloud-gateway/issues/3273" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3273/hovercard" href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3273">#3273</a>) <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3288" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3288/hovercard">#3288</a>
* Using RouterFunctions.route() results in exception <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3265" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3265/hovercard">#3265</a>
* Gateway MVC: Predicates with multiple values via configuration not working (path, host, etc...) <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3252" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3252/hovercard">#3252</a>
* Spring gateway MVC - Property : spring.cloud.gateway.x-forwarded.enabled not implemented <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3237" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3237/hovercard">#3237</a>
* Fix publishEvent RefreshRoutesResultEvent before cache.put <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3224" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3224/hovercard">#3224</a>
* Declare Bean for the new public KeyValueConverter <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3207" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3207/hovercard">#3207</a>
* Gateway MVC conflict with spring-boot-devtools <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3199" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3199/hovercard">#3199</a>
* Allow forward scheme for spring cloud gateway mvc similar to its webflux counterpart for declarative configuration using application properties or yaml <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3188" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3188/hovercard">#3188</a>
* Changed the constant name representing the default Time-to-Live (TTL)‚Ä¶ <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3186" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3186/hovercard">#3186</a>
* In spring cloud gateway mvc, an exception occurs when the request address contains spaces <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3185" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3185/hovercard">#3185</a>
* The LocalResponseCacheGatewayFilterFactory is creating a new CacheManager for each Filter <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3025" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3025/hovercard">#3025</a>
* To fix <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="949911651" data-permission-text="Title is private" data-url="https://github.com/spring-cloud/spring-cloud-gateway/issues/2304" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2304/hovercard" href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2304">GH-2304</a> SaveSessionGatewayFilterFactory didn't work correctly <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2997" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2997/hovercard">#2997</a>
* Fix Bug : RemoveCachedBodyFilter does not release direct memory correctly resulting in a memory leak <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1735789665" data-permission-text="Title is private" data-url="https://github.com/spring-cloud/spring-cloud-gateway/issues/2969" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2969/hovercard" href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2969">#2969</a> <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2971" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2971/hovercard">#2971</a>
* Gateway Routes URI of localhost:port without <code>http://</code> returns empty body with 200 status code <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2919" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2919/hovercard">#2919</a>
* <code>AddRequestParameterGatewayFilterFactory</code> Invalid URI query, can not deal with encoded path segment <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2726" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2726/hovercard">#2726</a>
* Listed connection headers not removed <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2653" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2653/hovercard">#2653</a>
* Fix for ModifyResponseBodyGatewayFilter not setting up response content-type <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2649" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2649/hovercard">#2649</a>
* remove-hop-by-hop header case sensitivity <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2645" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/2645/hovercard">#2645</a>
* Delete the weight-configured route (-Weight), GroupWeightConfig will not delete, causing the route conflict with the same weightGroup, causing 404 error <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/922" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/922/hovercard">#922</a>

üìî Documentation

* Update to spring-doc-actions v0.0.15 <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3306" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3306/hovercard">#3306</a>
* Missing redis-route-definition-repository property metadata <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3299" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3299/hovercard">#3299</a>
* Document that paths in route uri's are ignored <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3292" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3292/hovercard">#3292</a>
* Document how to register custom predicates and filters for use in Server MVC configuration <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3268" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3268/hovercard">#3268</a>
* Gateway-Mvc FormFilter erase all parameters causing retrive parameter return null in later filter or servlet <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/3244" data-hovercard-type="issue" data-hovercard-url="/spring-cloud/spring-cloud-gateway/issues/3244/hovercard">#3244</a>
* Fix documentation sample imports and missing .build() call <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3223" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3223/hovercard">#3223</a>
* Update gateway-request-predicates.adoc <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3208" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3208/hovercard">#3208</a>
* Add missing colon <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3187" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3187/hovercard">#3187</a>
* Fix typo in document <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3146" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3146/hovercard">#3146</a>
* Fix contribution link in README.adoc and add a link to repository map <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/3057" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/3057/hovercard">#3057</a>
* Updates documentation to correct RewriteLocationResponseHeaderGatewayFilterFactory parameters and default value <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2754" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2754/hovercard">#2754</a>
* Corrected the expression and provided a YAML example <a href="https://github.com/spring-cloud/spring-cloud-gateway/pull/2733" data-hovercard-type="pull_request" data-hovercard-url="/spring-cloud/spring-cloud-gateway/pull/2733/hovercard">#2733</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/JesseEstum/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/JesseEstum">@JesseEstum</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/JoeCqupt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/JoeCqupt">@JoeCqupt</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/LoggingResearch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/LoggingResearch">@LoggingResearch</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Milkdove/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Milkdove">@Milkdove</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/NilsEngelbach/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/NilsEngelbach">@NilsEngelbach</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Robinson28years/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Robinson28years">@Robinson28years</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/alexkarezin/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/alexkarezin">@alexkarezin</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/caixunshi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/caixunshi">@caixunshi</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/dadicarlo/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dadicarlo">@dadicarlo</a>, <a class="user-mention notranslate" data-hovercard-type="organization" data-hovercard-url="/orgs/dependabot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dependabot">@dependabot</a>[bot], <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/dogglezz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dogglezz">@dogglezz</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/dsyer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dsyer">@dsyer</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/f-ranieri/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/f-ranieri">@f-ranieri</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/gonmmarques/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gonmmarques">@gonmmarques</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ice2shell/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ice2shell">@ice2shell</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/imzhoukunqiang/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/imzhoukunqiang">@imzhoukunqiang</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jeremy-l-ford/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jeremy-l-ford">@jeremy-l-ford</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jongwooo/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jongwooo">@jongwooo</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/liubao68/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/liubao68">@liubao68</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/manzhizhen/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/manzhizhen">@manzhizhen</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/martamedio/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/martamedio">@martamedio</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/muchnik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/muchnik">@muchnik</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/rwinch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/rwinch">@rwinch</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/shivakrishnaah/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/shivakrishnaah">@shivakrishnaah</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/tom916/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tom916">@tom916</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/tony-clarke-amdocs/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tony-clarke-amdocs">@tony-clarke-amdocs</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/trajano/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/trajano">@trajano</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/tungj/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tungj">@tungj</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/wangYX657211334/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wangYX657211334">@wangYX657211334</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/xjs1919/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/xjs1919">@xjs1919</a>

