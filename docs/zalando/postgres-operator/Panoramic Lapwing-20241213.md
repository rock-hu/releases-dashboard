# Panoramic Lapwing

## release on 20241213

## description

## changes

We are excited to announce yet another new release of the Postgres Operator. Thanks to everyone who contributed with PRs, feedback, raising issues or providing ideas.

New features

* new option to enable owner references on all child resources (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2395607510" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2688" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2688/hovercard" href="https://github.com/zalando/postgres-operator/pull/2688">#2688</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1565016488" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2199" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2199/hovercard" href="https://github.com/zalando/postgres-operator/pull/2199">#2199</a>)
* implement per-cluster maintenance windows to define when automatic major version upgrade can happen (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2440385666" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2710" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2710/hovercard" href="https://github.com/zalando/postgres-operator/pull/2710">#2710</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2473113134" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2731" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2731/hovercard" href="https://github.com/zalando/postgres-operator/pull/2731">#2731</a>)
* [Helm] add extraEnvs for operator deployments (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2372605609" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2671" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2671/hovercard" href="https://github.com/zalando/postgres-operator/pull/2671">#2671</a>)

Enhancements

* pass inherited annotations also to existing child resources (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2343494665" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2657" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2657/hovercard" href="https://github.com/zalando/postgres-operator/pull/2657">#2657</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2444921587" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2713" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2713/hovercard" href="https://github.com/zalando/postgres-operator/pull/2713">#2713</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2460666387" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2723" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2723/hovercard" href="https://github.com/zalando/postgres-operator/pull/2723">#2723</a>)
* all child resources are now represented in the cluster's Go struct incl. service, endpoints/configmaps created by Patroni (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2444921587" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2713" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2713/hovercard" href="https://github.com/zalando/postgres-operator/pull/2713">#2713</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2473914875" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2733" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2733/hovercard" href="https://github.com/zalando/postgres-operator/pull/2733">#2733</a>)
* stream resources are not created after errors on syning the publication and slot (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2435660869" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2704" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2704/hovercard" href="https://github.com/zalando/postgres-operator/pull/2704">#2704</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2463237469" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2728" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2728/hovercard" href="https://github.com/zalando/postgres-operator/pull/2728">#2728</a>)
* update package dependencies when building image (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2353204645" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2665" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2665/hovercard" href="https://github.com/zalando/postgres-operator/pull/2665">#2665</a>)
* simplify delivery yaml file for building operator (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2375302683" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2673" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2673/hovercard" href="https://github.com/zalando/postgres-operator/pull/2673">#2673</a>)
* resolve code problems reported by newer linters (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2445183375" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2715" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2715/hovercard" href="https://github.com/zalando/postgres-operator/pull/2715">#2715</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2444921587" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2713" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2713/hovercard" href="https://github.com/zalando/postgres-operator/pull/2713">#2713</a>)
* config map example has been fully aligned with CRD config defaults (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2465673473" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2729" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2729/hovercard" href="https://github.com/zalando/postgres-operator/pull/2729">#2729</a>)
* update Go to 1.22.5 and also updated dependencies (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2424875287" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2699" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2699/hovercard" href="https://github.com/zalando/postgres-operator/pull/2699">#2699</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2465673473" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2729" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2729/hovercard" href="https://github.com/zalando/postgres-operator/pull/2729">#2729</a>)

Bugfixes

* fix deletion of resources when cluster fields are empty (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2444921587" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2713" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2713/hovercard" href="https://github.com/zalando/postgres-operator/pull/2713">#2713</a>)
* fix volumeMounts diff (nil vs. empty) when comparing containers (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2391144501" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2686" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2686/hovercard" href="https://github.com/zalando/postgres-operator/pull/2686">#2686</a>)
* do not set empty secret env vars for logical backup on GCS and Azure when not configured (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2473291109" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2732" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2732/hovercard" href="https://github.com/zalando/postgres-operator/pull/2732">#2732</a>)
* handle publications without tables (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2458057608" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2722" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2722/hovercard" href="https://github.com/zalando/postgres-operator/pull/2722">#2722</a>)

Breaking changes

* :warning: wal-g backups will not work out-of-the box with this release. Please use Spilo version ghcr.io/zalando/spilo-16:3.3-p3
* removing streams from manifest triggers a removal of database publication, slots and FES resources (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2386147505" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2684" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2684/hovercard" href="https://github.com/zalando/postgres-operator/pull/2684">#2684</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2167291804" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2563" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2563/hovercard" href="https://github.com/zalando/postgres-operator/pull/2563">#2563</a>)
* automatic major version upgrades are enabled by default (<code>manual</code> mode) (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2465673473" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2729" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2729/hovercard" href="https://github.com/zalando/postgres-operator/pull/2729">#2729</a>)
* dropped default of <code>additional_secret_mount_path</code> option when configured via config CRD (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2465673473" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2729" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2729/hovercard" href="https://github.com/zalando/postgres-operator/pull/2729">#2729</a>)
* dropped support for Postgres 11 (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2437637613" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2706" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2706/hovercard" href="https://github.com/zalando/postgres-operator/pull/2706">#2706</a>)
* dropped helm packages for 1.8.2 releases (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2465673473" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2729" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2729/hovercard" href="https://github.com/zalando/postgres-operator/pull/2729">#2729</a>)

amd images:

<strong>Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator:v1.13.0

<strong>UI Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator-ui:v1.13.0

<strong>Logical Backup Docker image</strong>: registry.opensource.zalan.do/acid/logical-backup:v1.13.0

Multi-arch image (arm):

Postgres Operator: ghcr.io/zalando/postgres-operator:v1.13.0

UI: ghcr.io/zalando/postgres-operator-ui:v1.13.0

Logical Backup: ghcr.io/zalando/postgres-operator/logical-backup:v1.13.0

<strong>Default Spilo image</strong>: ghcr.io/zalando/spilo-16:3.3-p1

Thanks to our contributors: <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/idanovinda/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/idanovinda">@idanovinda</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/FxKu/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FxKu">@FxKu</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/hughcapet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hughcapet">@hughcapet</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/macedigital/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/macedigital">@macedigital</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sdudoladov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sdudoladov">@sdudoladov</a>

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/fahedouch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/fahedouch">@fahedouch</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/mbegenau/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mbegenau">@mbegenau</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/nickmansrob/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nickmansrob">@nickmansrob</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/desaintmartin/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/desaintmartin">@desaintmartin</a>

