# Tactful Gerbil

## release on 20230421

## description

## changes

We are excited to announce a new release of the Postgres Operator. A rather small one but bringing you ARM support for the operator (pooler, ui and logical backup will follow). Thanks to everyone who contributed with PRs, feedback, raising issues or providing ideas.

New features

* Provide Postgres-Operator as multi-arch image that can run on arm (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1633673215" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2268" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2268/hovercard" href="https://github.com/zalando/postgres-operator/pull/2268">#2268</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1477988486" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2127" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2127/hovercard" href="https://github.com/zalando/postgres-operator/pull/2127">#2127</a>)
* New default spilo image runs with Patroni 3.0 which supports <a href="https://patroni.readthedocs.io/en/master/dcs_failsafe_mode.html" rel="nofollow">DCS failsafe mode</a> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1631041552" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2266" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2266/hovercard" href="https://github.com/zalando/postgres-operator/pull/2266">#2266</a>)

Enhancements

* Select only <code>syncStandby</code> as switchover candidate in synchronous mode (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1649093341" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2278" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2278/hovercard" href="https://github.com/zalando/postgres-operator/pull/2278">#2278</a>)
* Improve retry logic and debuggability in <code>run_operator_locally</code> script (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1582172589" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2218" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2218/hovercard" href="https://github.com/zalando/postgres-operator/pull/2218">#2218</a>)
* Provide K8s support matrix in README (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1593424144" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2232" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2232/hovercard" href="https://github.com/zalando/postgres-operator/pull/2232">#2232</a>)
* Update go to v1.19.8 and update operator dependencies (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1676712410" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2299" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2299/hovercard" href="https://github.com/zalando/postgres-operator/pull/2299">#2299</a>)
* [UI] allow UI to be accessed via ingress rules (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1561408982" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2195" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2195/hovercard" href="https://github.com/zalando/postgres-operator/pull/2195">#2195</a>)
* [UI] Show host address for pooler master service (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1568213523" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2202" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2202/hovercard" href="https://github.com/zalando/postgres-operator/pull/2202">#2202</a>)

Bugfixes

* Make TLS support for connection pooler work (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1614087894" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2255" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2255/hovercard" href="https://github.com/zalando/postgres-operator/pull/2255">#2255</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1579300606" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2216" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2216/hovercard" href="https://github.com/zalando/postgres-operator/pull/2216">#2216</a>)
* Sync existing slots on operator restart (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1596666310" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2238" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2238/hovercard" href="https://github.com/zalando/postgres-operator/pull/2238">#2238</a>)
* When adding streams sync statefulset to restart Postgres with new <code>wal_level</code> config (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1601762065" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2245" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2245/hovercard" href="https://github.com/zalando/postgres-operator/pull/2245">#2245</a>)
* Minor code improvements for error handling during cluster creation (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1638462500" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2273" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2273/hovercard" href="https://github.com/zalando/postgres-operator/pull/2273">#2273</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1670830890" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2289" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2289/hovercard" href="https://github.com/zalando/postgres-operator/pull/2289">#2289</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1670852989" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2290" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2290/hovercard" href="https://github.com/zalando/postgres-operator/pull/2290">#2290</a>)
* Add Patroni config to helm chart template (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1675232842" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2297" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2297/hovercard" href="https://github.com/zalando/postgres-operator/pull/2297">#2297</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1676384362" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2298" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2298/hovercard" href="https://github.com/zalando/postgres-operator/pull/2298">#2298</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1676712410" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2299" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2299/hovercard" href="https://github.com/zalando/postgres-operator/pull/2299">#2299</a>)
* Remove debug log for generated env vars of logical backup (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1593621728" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2233" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2233/hovercard" href="https://github.com/zalando/postgres-operator/pull/2233">#2233</a>)
* Logical Backup: Return behavior to interpret <code>KUBERNETES_SERVICE_HOST</code> as hostname and not only IP (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1666310952" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2285" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2285/hovercard" href="https://github.com/zalando/postgres-operator/pull/2285">#2285</a>)

Breaking changes

* Define <code>RunAsUser</code> (100) and <code>RunAsGroup</code> (101) in security context of pooler pods (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1614087894" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2255" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2255/hovercard" href="https://github.com/zalando/postgres-operator/pull/2255">#2255</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1587709634" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2225" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2225/hovercard" href="https://github.com/zalando/postgres-operator/pull/2225">#2225</a>)
* Rename <code>failsafe_mode</code> option in OperatorConfiguration CRD to <code>enable_patroni_failsafe_mode</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1676384362" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2298" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2298/hovercard" href="https://github.com/zalando/postgres-operator/pull/2298">#2298</a>)

<strong>Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator:v1.10.0

<strong>Multi-arch image (arm-support)</strong>: ghcr.io/zalando/postgres-operator:v1.10.0

<strong>UI Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator-ui:v1.10.0

<strong>Sample logical backup image</strong>: registry.opensource.zalan.do/acid/logical-backup:v1.10.0

<strong>Default Spilo image (arm-support)</strong>: ghcr.io/zalando/spilo-15:3.0-p1

Thanks to our contributors: <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/FxKu/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FxKu">@FxKu</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/hughcapet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hughcapet">@hughcapet</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/idanovinda/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/idanovinda">@idanovinda</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jopadi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jopadi">@jopadi</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sdudoladov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sdudoladov">@sdudoladov</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Jan-M/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Jan-M">@Jan-M</a>

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/2tvenom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/2tvenom">@2tvenom</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/LordGaav/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/LordGaav">@LordGaav</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/simo9000/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/simo9000">@simo9000</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/lengrongfu/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lengrongfu">@lengrongfu</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/drivebyer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/drivebyer">@drivebyer</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/genofire/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/genofire">@genofire</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jgehrcke/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jgehrcke">@jgehrcke</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/addreas/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/addreas">@addreas</a>,

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/thcdrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thcdrt">@thcdrt</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jmehitch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jmehitch">@jmehitch</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jfmatth/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jfmatth">@jfmatth</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/thedatabaseme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thedatabaseme">@thedatabaseme</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/samox73/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/samox73">@samox73</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/yoshihikoueno/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/yoshihikoueno">@yoshihikoueno</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/verbotenj/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verbotenj">@verbotenj</a>

