# Boggling Mole

## release on 20251021
## description
## changes
Here's a new release of the Postgres Operator. Thanks to everyone who contributed with PRs, feedback, raising issues or providing ideas. For those asking for Postgres 18: We haven't yet included it into Spilo and you have to wait for the next minor release in Q1 2026.

Enhancements

* introducing a second PDB for critical operations e.g. to protect pods during boostrap phase (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2764454429" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2830" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2830/hovercard" href="https://github.com/zalando/postgres-operator/pull/2830">#2830</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2795148874" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2844" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2844/hovercard" href="https://github.com/zalando/postgres-operator/pull/2844">#2844</a>)
* added support for Patroni's <a href="https://github.com/patroni/patroni/blob/master/docs/yaml_configuration.rst?plain=1#L185">bootstrap_labels</a> feature (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2903284500" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2872" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2872/hovercard" href="https://github.com/zalando/postgres-operator/pull/2872">#2872</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2907576566" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2875" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2875/hovercard" href="https://github.com/zalando/postgres-operator/pull/2875">#2875</a>)
* ensure podAnnotations are removed from pods if reset in the config (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2755644838" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2826" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2826/hovercard" href="https://github.com/zalando/postgres-operator/pull/2826">#2826</a>)
* inlcude service selector comparison to compareServices. Required when switching to <code>kubernetes_use_configmaps</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3430592861" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2955" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2955/hovercard" href="https://github.com/zalando/postgres-operator/pull/2955">#2955</a>)
* include external traffic policy comparison into service diffing (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3444534054" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2956" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2956/hovercard" href="https://github.com/zalando/postgres-operator/pull/2956">#2956</a>)
* improved <code>maintenanceWindows</code> checks during major version upgrades and pod migrations (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2718022323" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2810" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2810/hovercard" href="https://github.com/zalando/postgres-operator/pull/2810">#2810</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2793111572" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2842" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2842/hovercard" href="https://github.com/zalando/postgres-operator/pull/2842">#2842</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2800953225" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2849" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2849/hovercard" href="https://github.com/zalando/postgres-operator/pull/2849">#2849</a>)
* extended example RBAC in preparation to switch to configmap-based cluster management (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3510728054" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2961" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2961/hovercard" href="https://github.com/zalando/postgres-operator/pull/2961">#2961</a>)
* upgrade to go 1.25.3 + updated dependencies (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3333505023" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2945" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2945/hovercard" href="https://github.com/zalando/postgres-operator/pull/2945">#2945</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3132651440" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2922" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2922/hovercard" href="https://github.com/zalando/postgres-operator/pull/2922">#2922</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2813666189" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2857" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2857/hovercard" href="https://github.com/zalando/postgres-operator/pull/2857">#2857</a>)
* [UI] Remove deprecated WAL-E library and enable WAL-G backup support in UI backend (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3076874764" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2915" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2915/hovercard" href="https://github.com/zalando/postgres-operator/pull/2915">#2915</a>)
* [Logical backup] try to get creds from gcp metadata if LOGICAL_GOOGLE_APPLICATION_CREDENTIALS is not set (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2778075785" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2837" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2837/hovercard" href="https://github.com/zalando/postgres-operator/pull/2837">#2837</a>)

Bugfixes

* fix to not create duplicate secrets for rotation users (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2848399963" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2863" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2863/hovercard" href="https://github.com/zalando/postgres-operator/pull/2863">#2863</a>)
* fix creation of secrets in other namespaces when using preparedDatabases and OwnerReference (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3068561850" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2912" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2912/hovercard" href="https://github.com/zalando/postgres-operator/pull/2912">#2912</a>)
* do not remove publications of slots defined in manifest (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2875656697" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2868" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2868/hovercard" href="https://github.com/zalando/postgres-operator/pull/2868">#2868</a>)
* <code>streams</code> section removal now deletes the stream resource (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2875656697" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2868" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2868/hovercard" href="https://github.com/zalando/postgres-operator/pull/2868">#2868</a>)
* docs fixes (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2988742901" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2896" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2896/hovercard" href="https://github.com/zalando/postgres-operator/pull/2896">#2896</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3364344767" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2948" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2948/hovercard" href="https://github.com/zalando/postgres-operator/pull/2948">#2948</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3364391553" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2949" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2949/hovercard" href="https://github.com/zalando/postgres-operator/pull/2949">#2949</a>)

Breaking changes

* Removed 1.9.0 helm chart releases

Important note on deprecated K8s Endpoints

:warning: This is the last release to have <code>kubernetes_use_configmaps</code> disabled by default. This option has once been introduced to support deployments on OpenShift but will now become the standard for K8s, too. For clusters with replicas you cannot easily switch from using <code>Endpoints</code> to <code>ConfigMaps</code> without risking a split-brain scenario because Patroni would read DCS-related facts from both these resources at the same time during a rotation. There are two possible migration paths:

Migrate in-place

This migration path requires three steps to be deployed separately:

1. Scale in all your database clusters to only one primary pod. This can be achivied with the <code>max_instances</code> config option set to <code>'1'</code>. A config change requires an operator pod restart. Make sure every Postgres cluster is scaled in to one pod before proceeding.
2. Change the operator config again and enable <code>kubenertes_use_configmaps</code>. Check if extra <code>ConfigMaps</code> ('-config' and '-failover') are created. It will also trigger a pod rotation and, since there's only the primary left, it will cause downtime.
3. Revert step 1, so all clusters are scaled out again.
4. (Optional) Remove all the <code>Endpoints</code> the Postgres Operator has managed before. But they do not cause eny harm if you leave them.

If you do not want to migrate all your clusters at once you can try working with multiple Postgres Operators instances that use different configs but have a <a href="https://github.com/zalando/postgres-operator/blob/master/docs/administrator.md#operators-with-defined-ownership-of-certain-postgres-clusters">CONTROLLER_ID</a> specified. By annotating the Postgres manifest with different controller ids, you could move a single cluster through the migration steps mentioned above.

Migrate via standby clusters

To reduce impact during the migration one can also do the following steps:

1. Set up a second Postgres Operator (+ CONTROLLER_ID specified) running with ConfigMaps
2. Create <a href="https://github.com/zalando/postgres-operator/blob/master/docs/user.md#setting-up-a-standby-cluster">standby clusters</a> to all Postgres resources (or one by one). The standbys would then be managed by the second operator using the annotation with the corresponding controller ID. Ideally, also copy all secrets of the source cluster beforehand to avoid connection issues later (see docs).
3. Stop writes on the source cluster and promote the standby cluster. Downtime depends mostly on the deployment time of your app to point to the new database cluster.

✔️ <strong>Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator:v1.15.0  

✔️ <strong>UI Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator-ui:v1.15.0  

✔️ <strong>Logical Backup Docker image</strong>: registry.opensource.zalan.do/acid/logical-backup:v1.15.0

Multi-arch image (arm):  

✔️ Postgres Operator: ghcr.io/zalando/postgres-operator:v1.15.0  

✖️ UI: ghcr.io/zalando/postgres-operator-ui:v1.15.0  

✖️ Logical Backup: ghcr.io/zalando/postgres-operator/logical-backup:v1.15.0

✔️ <strong>Default Spilo image</strong>: ghcr.io/zalando/spilo-17:4.0-p3

Thanks to our contributors: <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/hughcapet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hughcapet">@hughcapet</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/FxKu/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FxKu">@FxKu</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/idanovinda/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/idanovinda">@idanovinda</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jopadi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jopadi">@jopadi</a>  

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ggramal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ggramal">@ggramal</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/mortenlj/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mortenlj">@mortenlj</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Juneezee/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Juneezee">@Juneezee</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/mjtrangoni/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mjtrangoni">@mjtrangoni</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/remram44/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/remram44">@remram44</a>

