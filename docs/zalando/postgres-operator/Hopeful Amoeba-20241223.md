# Hopeful Amoeba

## release on 20241223

## description

## changes

The year is coming to a close and we are happy to announce another new release of the Postgres Operator. Thanks to everyone who contributed with PRs, feedback, raising issues or providing ideas. Have a smooth transition into 2025.

New features

* support for Postgres 17 (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2585285778" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2773" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2773/hovercard" href="https://github.com/zalando/postgres-operator/pull/2773">#2773</a>)
* ability to set QPS and burst limits for api client to make operator handle bigger fleets better (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2358811072" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2667" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2667/hovercard" href="https://github.com/zalando/postgres-operator/pull/2667">#2667</a>)
* sidecars can be running with a set of Commands (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1948293642" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2449" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2449/hovercard" href="https://github.com/zalando/postgres-operator/pull/2449">#2449</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2755534101" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2825" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2825/hovercard" href="https://github.com/zalando/postgres-operator/pull/2825">#2825</a>)
* support for new EBS CSI Driver (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2378588890" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2677" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2677/hovercard" href="https://github.com/zalando/postgres-operator/pull/2677">#2677</a>)
* provide more scaling means for streams and support ignore recovery type (zalando-internal) (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2739118320" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2817" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2817/hovercard" href="https://github.com/zalando/postgres-operator/pull/2817">#2817</a>)

Enhancements

* added retry logic for switchover candidate search in asynchronous mode (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2522717915" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2760" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2760/hovercard" href="https://github.com/zalando/postgres-operator/pull/2760">#2760</a>)
* <code>preparedDatabases</code> feature supports database and schema names with special characters (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2497435392" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2745" data-hovercard-type="issue" data-hovercard-url="/zalando/postgres-operator/issues/2745/hovercard" href="https://github.com/zalando/postgres-operator/issues/2745">#2745</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2594623599" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2782" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2782/hovercard" href="https://github.com/zalando/postgres-operator/pull/2782">#2782</a>)
* operator sets annotation if last major version upgrade failed, next attempt skipped when annotation is present (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2463034126" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2727" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2727/hovercard" href="https://github.com/zalando/postgres-operator/pull/2727">#2727</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2514282506" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2755" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2755/hovercard" href="https://github.com/zalando/postgres-operator/pull/2755">#2755</a>)
* added more pre-checks before executing major version upgrade script (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2581244802" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2772" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2772/hovercard" href="https://github.com/zalando/postgres-operator/pull/2772">#2772</a>)
* remember specs of PVCs on sync to make cluster deletion not miss out on them in edge cases (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2597159228" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2785" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2785/hovercard" href="https://github.com/zalando/postgres-operator/pull/2785">#2785</a>)
* added compatibility with Patroni 4, but operator still uses old <code>master</code> label behavior for now (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2741800999" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2818" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2818/hovercard" href="https://github.com/zalando/postgres-operator/pull/2818">#2818</a>)
* cleaned up code problems reported by go linter (mostly redundant type from arrays) (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2482819619" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2739" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2739/hovercard" href="https://github.com/zalando/postgres-operator/pull/2739">#2739</a>)
* improved docs about automated major version upgrades (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2693978545" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2807" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2807/hovercard" href="https://github.com/zalando/postgres-operator/pull/2807">#2807</a>)
* use a more recent postgres-exporter example in servicemonitor manifest (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2589112958" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2777" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2777/hovercard" href="https://github.com/zalando/postgres-operator/pull/2777">#2777</a>)
* update Go to 1.23.4 and also updated dependencies (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2754883088" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2824" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2824/hovercard" href="https://github.com/zalando/postgres-operator/pull/2824">#2824</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2482895421" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2740" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2740/hovercard" href="https://github.com/zalando/postgres-operator/pull/2740">#2740</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2734339134" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2816" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2816/hovercard" href="https://github.com/zalando/postgres-operator/pull/2816">#2816</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2744902050" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2819" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2819/hovercard" href="https://github.com/zalando/postgres-operator/pull/2819">#2819</a>)
* [Helm] make replica count for UI deployment configurable (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2438568435" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2708" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2708/hovercard" href="https://github.com/zalando/postgres-operator/pull/2708">#2708</a>)

Bugfixes

* update CRD schema pattern for resources to allow empty strings (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2475871069" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2735" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2735/hovercard" href="https://github.com/zalando/postgres-operator/pull/2735">#2735</a>)
* do not use extra labels to list stream resources because they can change and lead to duplicates (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2672350213" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2803" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2803/hovercard" href="https://github.com/zalando/postgres-operator/pull/2803">#2803</a>)
* Spilo image contains fix for breaking change for pushing backups with wal-g (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2601760043" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2786" data-hovercard-type="issue" data-hovercard-url="/zalando/postgres-operator/issues/2786/hovercard" href="https://github.com/zalando/postgres-operator/issues/2786">#2786</a>)
* [Helm] fix indentation of <code>extraEnvs</code> in operator deployment (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2594830572" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2783" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2783/hovercard" href="https://github.com/zalando/postgres-operator/pull/2783">#2783</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2731741259" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2814" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2814/hovercard" href="https://github.com/zalando/postgres-operator/pull/2814">#2814</a>)
* [Helm] cluste role was lacking patch privilege on PVCs (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2527649319" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2762" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2762/hovercard" href="https://github.com/zalando/postgres-operator/pull/2762">#2762</a>)

Breaking changes

* updated logs on SYNC and UPDATE events (breaking only if you rely on certain log messages) (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2482743976" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2738" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2738/hovercard" href="https://github.com/zalando/postgres-operator/pull/2738">#2738</a>)
* dropping support for Postgres 12 (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2585285778" data-permission-text="Title is private" data-url="https://github.com/zalando/postgres-operator/issues/2773" data-hovercard-type="pull_request" data-hovercard-url="/zalando/postgres-operator/pull/2773/hovercard" href="https://github.com/zalando/postgres-operator/pull/2773">#2773</a>)

amd images:

<strong>Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator:v1.14.0

<strong>UI Docker image</strong>: registry.opensource.zalan.do/acid/postgres-operator-ui:v1.14.0

<strong>Logical Backup Docker image</strong>: registry.opensource.zalan.do/acid/logical-backup:v1.14.0

Multi-arch image (arm):

Postgres Operator: ghcr.io/zalando/postgres-operator:v1.14.0

UI: ghcr.io/zalando/postgres-operator-ui:v1.14.0

Logical Backup: ghcr.io/zalando/postgres-operator/logical-backup:v1.14.0

<strong>Default Spilo image</strong>: ghcr.io/zalando/spilo-17:4.0-p2

Thanks to our contributors: <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/idanovinda/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/idanovinda">@idanovinda</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/hughcapet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hughcapet">@hughcapet</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/FxKu/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FxKu">@FxKu</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/macedigital/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/macedigital">@macedigital</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sdudoladov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sdudoladov">@sdudoladov</a>

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/fahedouch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/fahedouch">@fahedouch</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/cosimomeli/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/cosimomeli">@cosimomeli</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/tabbyl21/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tabbyl21">@tabbyl21</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Demch1k/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Demch1k">@Demch1k</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/dmotte/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dmotte">@dmotte</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/prasadkris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/prasadkris">@prasadkris</a>,

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/mjtrangoni/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mjtrangoni">@mjtrangoni</a> <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/zyue110026/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zyue110026">@zyue110026</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DaDummy/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DaDummy">@DaDummy</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Mart-Kuc/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Mart-Kuc">@Mart-Kuc</a>

