# 1.16.0

## release on 20251107
## description
## changes
We upgraded the Prometheus Java Client to <code>1.4.x</code> (<a href="https://github.com/micrometer-metrics/micrometer/pull/6830" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6830/hovercard">#6830</a>) which brings support for Unicode which includes some behavioral change in naming conventions, see the <a href="https://github.com/micrometer-metrics/micrometer/wiki/1.16-Migration-Guide">1.16 Migration-Guide</a>.

:warning: Noteworthy

* Deprecate the Wavefront module <a href="https://github.com/micrometer-metrics/micrometer/issues/6328" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6328/hovercard">#6328</a>
* Remove deprecated io.micrometer.core.lang annotations <a href="https://github.com/micrometer-metrics/micrometer/issues/6407" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6407/hovercard">#6407</a>
* Register JCache <code>cache.removals</code> as a FunctionCounter by default <a href="https://github.com/micrometer-metrics/micrometer/issues/2754" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/2754/hovercard">#2754</a>
* Improve no-op behavior of the Observation API <a href="https://github.com/micrometer-metrics/micrometer/pull/6700" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6700/hovercard">#6700</a>

‚≠ê New Features

* Support KeyValues with annotations when using <code>ObservedAspect</code>/<code>@Observed</code> <a href="https://github.com/micrometer-metrics/micrometer/issues/4030" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4030/hovercard">#4030</a>
* Validate low cardinality keys <a href="https://github.com/micrometer-metrics/micrometer/pull/6713" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6713/hovercard">#6713</a>
* Add counter for total loaded classes <a href="https://github.com/micrometer-metrics/micrometer/issues/3561" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/3561/hovercard">#3561</a>
* Add eventexecutor.workers metrics for Netty <a href="https://github.com/micrometer-metrics/micrometer/issues/6375" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6375/hovercard">#6375</a>
* Avoid DistributionStatisticsConfig creation when retrieving timers <a href="https://github.com/micrometer-metrics/micrometer/pull/6661" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6661/hovercard">#6661</a>
* Avoid capturing lambda allocation when retrieving existing meters <a href="https://github.com/micrometer-metrics/micrometer/pull/6670" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6670/hovercard">#6670</a>
* Introduce MeterConvention <a href="https://github.com/micrometer-metrics/micrometer/issues/6710" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6710/hovercard">#6710</a>
* OpenTelemetry Semantic Conventions for JVM metrics <a href="https://github.com/micrometer-metrics/micrometer/issues/5286" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/5286/hovercard">#5286</a>
* Add MeterFilter.forMeters utility method <a href="https://github.com/micrometer-metrics/micrometer/pull/6594" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6594/hovercard">#6594</a>
* Apache HC 5 OTel semantic convention <a href="https://github.com/micrometer-metrics/micrometer/pull/6591" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6591/hovercard">#6591</a>
* Improve nullability for gauges <a href="https://github.com/micrometer-metrics/micrometer/pull/6546" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6546/hovercard">#6546</a>
* Metrics for Generational Shenandoah GC <a href="https://github.com/micrometer-metrics/micrometer/issues/4259" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4259/hovercard">#4259</a>
* Support custom tags in NettyEventExecutorMetrics <a href="https://github.com/micrometer-metrics/micrometer/issues/6592" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6592/hovercard">#6592</a>
* Support newsgroups KeyValue for Jakarta Mail instrumentation <a href="https://github.com/micrometer-metrics/micrometer/pull/6558" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6558/hovercard">#6558</a>
* Add KeyName.withNoneValue() <a href="https://github.com/micrometer-metrics/micrometer/pull/6125" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6125/hovercard">#6125</a>
* Add getAll to Getter for repeated metadata <a href="https://github.com/micrometer-metrics/micrometer/pull/6312" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6312/hovercard">#6312</a>
* Enhance logging of negative amount in AbstractTimer.record() by printing stack trace <a href="https://github.com/micrometer-metrics/micrometer/pull/6530" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6530/hovercard">#6530</a>
* Flag to register JCache cache.removals as FunctionCounter <a href="https://github.com/micrometer-metrics/micrometer/pull/6471" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6471/hovercard">#6471</a>
* Improved Meter.Id#getTags() performance <a href="https://github.com/micrometer-metrics/micrometer/pull/6182" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6182/hovercard">#6182</a>
* Jakarta Mail instrumentation <a href="https://github.com/micrometer-metrics/micrometer/issues/5985" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/5985/hovercard">#5985</a>
* Log requests as trace level for OtlpMeterRegistry <a href="https://github.com/micrometer-metrics/micrometer/pull/6514" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6514/hovercard">#6514</a>
* Make KafkaMetrics refresh interval configurable <a href="https://github.com/micrometer-metrics/micrometer/pull/6319" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6319/hovercard">#6319</a>
* Migrate to JSpecify annotations for nullability constraints <a href="https://github.com/micrometer-metrics/micrometer/issues/5547" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/5547/hovercard">#5547</a>
* Provide meter count in HighCardinalityTagsDetector <a href="https://github.com/micrometer-metrics/micrometer/pull/6510" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6510/hovercard">#6510</a>
* StackdriverConfig option to not create metric descriptors <a href="https://github.com/micrometer-metrics/micrometer/issues/6281" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6281/hovercard">#6281</a>
* Use String.replace() where possible <a href="https://github.com/micrometer-metrics/micrometer/pull/6449" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6449/hovercard">#6449</a>

üêû Bug Fixes

* Exclude java.* from OSGI Import-Package <a href="https://github.com/micrometer-metrics/micrometer/issues/6810" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6810/hovercard">#6810</a>
* Distribution without percentiles always has value 0 in Stackdriver <a href="https://github.com/micrometer-metrics/micrometer/issues/6401" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6401/hovercard">#6401</a>
* Incompatible with slf4j 2 in OSGi <a href="https://github.com/micrometer-metrics/micrometer/issues/6406" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6406/hovercard">#6406</a>
* LongTaskTimer#measure does not return max duration <a href="https://github.com/micrometer-metrics/micrometer/issues/6421" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6421/hovercard">#6421</a>
* Return NaN for null KafkaMetrics values <a href="https://github.com/micrometer-metrics/micrometer/issues/6324" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6324/hovercard">#6324</a>
* Scrape failure when conflicting meter types are registered <a href="https://github.com/micrometer-metrics/micrometer/issues/6434" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6434/hovercard">#6434</a>
* ValueResolver and ValueExpressionResolver nullability is inconsistent <a href="https://github.com/micrometer-metrics/micrometer/issues/6280" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6280/hovercard">#6280</a>

üìî Documentation

* Add a note about client-side percentiles with histogram <a href="https://github.com/micrometer-metrics/micrometer/pull/6836" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6836/hovercard">#6836</a>
* Add docs for HighCardinalityTagsDetector <a href="https://github.com/micrometer-metrics/micrometer/pull/6822" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6822/hovercard">#6822</a>
* Polish Javadoc from <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3098784447" data-permission-text="Title is private" data-url="https://github.com/micrometer-metrics/micrometer/issues/6319" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6319/hovercard" href="https://github.com/micrometer-metrics/micrometer/pull/6319">gh-6319</a> <a href="https://github.com/micrometer-metrics/micrometer/pull/6376" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6376/hovercard">#6376</a>

üî® Dependency Upgrades

* Upgrade Micrometer Context Propagation to 1.2.0 <a href="https://github.com/micrometer-metrics/micrometer/issues/6860" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6860/hovercard">#6860</a>
* Bump ch.qos.logback:logback-classic from 1.5.19 to 1.5.20 <a href="https://github.com/micrometer-metrics/micrometer/pull/6813" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6813/hovercard">#6813</a>
* Bump com.google.auth:google-auth-library-oauth2-http from 1.34.0 to 1.40.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/6801" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6801/hovercard">#6801</a>
* Bump com.google.cloud:google-cloud-monitoring from 3.63.0 to 3.79.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/6818" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6818/hovercard">#6818</a>
* Bump com.google.cloud:libraries-bom from 26.60.0 to 26.71.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/6826" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6826/hovercard">#6826</a>
* Bump com.netflix.spectator:spectator-reg-atlas from 1.8.12 to 1.9.1 <a href="https://github.com/micrometer-metrics/micrometer/pull/6793" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6793/hovercard">#6793</a>
* Bump io.prometheus:prometheus-metrics-bom from 1.3.6 to 1.4.2 <a href="https://github.com/micrometer-metrics/micrometer/pull/6830" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6830/hovercard">#6830</a>
* Bump software.amazon.awssdk:cloudwatch from 2.31.41 to 2.37.5 <a href="https://github.com/micrometer-metrics/micrometer/pull/6834" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6834/hovercard">#6834</a>
* Bump com.dynatrace.metric.util:dynatrace-metric-utils-java from 2.2.1 to 2.4.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/6739" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6739/hovercard">#6739</a>
* Bump dropwizard-metrics from 4.2.30 to 4.2.37 <a href="https://github.com/micrometer-metrics/micrometer/pull/6729" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6729/hovercard">#6729</a>
* Bump io.opentelemetry.proto:opentelemetry-proto from 1.5.0-alpha to 1.7.0-alpha <a href="https://github.com/micrometer-metrics/micrometer/pull/6290" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6290/hovercard">#6290</a>

üìù Tasks

* Remove optional jsr305 dependency where not needed <a href="https://github.com/micrometer-metrics/micrometer/issues/6493" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6493/hovercard">#6493</a>
* Require explicit constraints in <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/contract/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/contract">@contract</a> <a href="https://github.com/micrometer-metrics/micrometer/pull/6568" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6568/hovercard">#6568</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:  

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/isanghaessi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/isanghaessi">@isanghaessi</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/izeye/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/izeye">@izeye</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/peterjeschke/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/peterjeschke">@peterjeschke</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/genuss/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/genuss">@genuss</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/etki/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/etki">@etki</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Shaderbug/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Shaderbug">@Shaderbug</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/MemencioPerez/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/MemencioPerez">@MemencioPerez</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/famaridon/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/famaridon">@famaridon</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/msqr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/msqr">@msqr</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/scordio/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scordio">@scordio</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jbertram/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jbertram">@jbertram</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/HeeChanN/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/HeeChanN">@HeeChanN</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ttaehee/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ttaehee">@ttaehee</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/deadok22/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/deadok22">@deadok22</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/pema4/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pema4">@pema4</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/thonra/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thonra">@thonra</a>

