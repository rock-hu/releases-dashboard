# 1.16.0-M1

## release on 20250715
## description
## changes
:warning: Noteworthy

* Remove deprecated io.micrometer.core.lang annotations <a href="https://github.com/micrometer-metrics/micrometer/issues/6407" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6407/hovercard">#6407</a>
* Register JCache <code>cache.removals</code> as a FunctionCounter by default <a href="https://github.com/micrometer-metrics/micrometer/issues/2754" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/2754/hovercard">#2754</a>

‚≠ê New Features

* Add KeyName.withNoneValue() <a href="https://github.com/micrometer-metrics/micrometer/pull/6125" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6125/hovercard">#6125</a>
* Add getAll to Getter for repeated metadata <a href="https://github.com/micrometer-metrics/micrometer/pull/6312" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6312/hovercard">#6312</a>
* Enhance logging of negative amount in AbstractTimer.record() by printing stack trace <a href="https://github.com/micrometer-metrics/micrometer/pull/6530" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6530/hovercard">#6530</a>
* Flag to register JCache cache.removals as FunctionCounter <a href="https://github.com/micrometer-metrics/micrometer/pull/6471" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6471/hovercard">#6471</a>
* Improved Meter.Id#getTags() performance <a href="https://github.com/micrometer-metrics/micrometer/pull/6182" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6182/hovercard">#6182</a>
* Jakarta Mail instrumentation <a href="https://github.com/micrometer-metrics/micrometer/issues/5985" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/5985/hovercard">#5985</a>
* Log requests as trace level for OtlpMeterRegistry <a href="https://github.com/micrometer-metrics/micrometer/pull/6514" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6514/hovercard">#6514</a>
* Make KafkaMetrics refresh interval configurable <a href="https://github.com/micrometer-metrics/micrometer/pull/6319" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6319/hovercard">#6319</a>
* Migrate to JSpecify annotations for nullability constraints <a href="https://github.com/micrometer-metrics/micrometer/issues/5547" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/5547/hovercard">#5547</a>
* Provide meter count in HighCardinalityTagsDetector <a href="https://github.com/micrometer-metrics/micrometer/pull/6510" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6510/hovercard">#6510</a>
* StackdriverConfig option to not create metric descriptors <a href="https://github.com/micrometer-metrics/micrometer/issues/6281" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6281/hovercard">#6281</a>
* Use String.replace() where possible <a href="https://github.com/micrometer-metrics/micrometer/pull/6449" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6449/hovercard">#6449</a>

üêû Bug Fixes

* Distribution without percentiles always has value 0 in Stackdriver <a href="https://github.com/micrometer-metrics/micrometer/issues/6401" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6401/hovercard">#6401</a>
* Incompatible with slf4j 2 in OSGi <a href="https://github.com/micrometer-metrics/micrometer/issues/6406" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6406/hovercard">#6406</a>
* LongTaskTimer#measure does not return max duration <a href="https://github.com/micrometer-metrics/micrometer/issues/6421" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6421/hovercard">#6421</a>
* Return NaN for null KafkaMetrics values <a href="https://github.com/micrometer-metrics/micrometer/issues/6324" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6324/hovercard">#6324</a>
* Scrape failure when conflicting meter types are registered <a href="https://github.com/micrometer-metrics/micrometer/issues/6434" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6434/hovercard">#6434</a>
* ValueResolver and ValueExpressionResolver nullability is inconsistent <a href="https://github.com/micrometer-metrics/micrometer/issues/6280" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6280/hovercard">#6280</a>

üìî Documentation

* Polish Javadoc from <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="3098784447" data-permission-text="Title is private" data-url="https://github.com/micrometer-metrics/micrometer/issues/6319" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6319/hovercard" href="https://github.com/micrometer-metrics/micrometer/pull/6319">gh-6319</a> <a href="https://github.com/micrometer-metrics/micrometer/pull/6376" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6376/hovercard">#6376</a>

üî® Dependency Upgrades

* Bump software.amazon.awssdk:cloudwatch from 2.31.41 to 2.31.78 <a href="https://github.com/micrometer-metrics/micrometer/pull/6525" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6525/hovercard">#6525</a>
* Bump io.prometheus:prometheus-metrics-bom from 1.3.6 to 1.3.10 <a href="https://github.com/micrometer-metrics/micrometer/pull/6523" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6523/hovercard">#6523</a>
* Bump com.google.cloud:libraries-bom from 26.60.0 to 26.63.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/6497" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6497/hovercard">#6497</a>
* Bump com.netflix.spectator:spectator-reg-atlas from 1.8.12 to 1.8.16 <a href="https://github.com/micrometer-metrics/micrometer/pull/6482" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6482/hovercard">#6482</a>
* Bump com.google.cloud:google-cloud-monitoring from 3.63.0 to 3.68.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/6474" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6474/hovercard">#6474</a>
* Bump com.google.auth:google-auth-library-oauth2-http from 1.34.0 to 1.37.1 <a href="https://github.com/micrometer-metrics/micrometer/pull/6437" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6437/hovercard">#6437</a>
* Bump dropwizard-metrics from 4.2.30 to 4.2.33 <a href="https://github.com/micrometer-metrics/micrometer/pull/6436" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6436/hovercard">#6436</a>
* Bump io.dropwizard.metrics5:metrics-core from 5.0.0 to 5.0.1 <a href="https://github.com/micrometer-metrics/micrometer/pull/6435" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6435/hovercard">#6435</a>
* Bump io.opentelemetry.proto:opentelemetry-proto from 1.5.0-alpha to 1.7.0-alpha <a href="https://github.com/micrometer-metrics/micrometer/pull/6290" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6290/hovercard">#6290</a>

üìù Tasks

* Remove optional jsr305 dependency where not needed <a href="https://github.com/micrometer-metrics/micrometer/issues/6493" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6493/hovercard">#6493</a>
* Make benchmark module require at least Java 17 <a href="https://github.com/micrometer-metrics/micrometer/pull/6469" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6469/hovercard">#6469</a>
* Missing <code>@NullMarked</code> <a href="https://github.com/micrometer-metrics/micrometer/pull/6433" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6433/hovercard">#6433</a>
* Deprecate micrometer-commons nullability annotations in favor of jSpecify <a href="https://github.com/micrometer-metrics/micrometer/issues/6425" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6425/hovercard">#6425</a>
* Add JDK 24 build job <a href="https://github.com/micrometer-metrics/micrometer/pull/6400" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/6400/hovercard">#6400</a>
* Update japicmp config for 1.16.0 development <a href="https://github.com/micrometer-metrics/micrometer/issues/6242" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/6242/hovercard">#6242</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/etki/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/etki">@etki</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Shaderbug/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Shaderbug">@Shaderbug</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/MemencioPerez/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/MemencioPerez">@MemencioPerez</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/famaridon/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/famaridon">@famaridon</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/izeye/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/izeye">@izeye</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/msqr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/msqr">@msqr</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/thonra/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thonra">@thonra</a>

