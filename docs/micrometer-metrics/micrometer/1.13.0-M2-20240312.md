# 1.13.0-M2

## release on 20240312

## description

## changes

:warning: Noteworthy

* Add support for Prometheus client 1.x <a href="https://github.com/micrometer-metrics/micrometer/pull/4846" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4846/hovercard">#4846</a>
* Deprecate instrumentation for Jetty 9, 10, 11 that is out of support <a href="https://github.com/micrometer-metrics/micrometer/issues/4779" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4779/hovercard">#4779</a>
* Deprecate Hystrix instrumentation <a href="https://github.com/micrometer-metrics/micrometer/issues/4587" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4587/hovercard">#4587</a>
* JvmHeapPressureMetrics have incorrect base unit <a href="https://github.com/micrometer-metrics/micrometer/issues/3236" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/3236/hovercard">#3236</a>
* Remove v1 CloudWatch module <a href="https://github.com/micrometer-metrics/micrometer/issues/1473" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/1473/hovercard">#1473</a>
* Make DefaultHttpClientObservationConvention#INSTANCE final <a href="https://github.com/micrometer-metrics/micrometer/pull/4770" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4770/hovercard">#4770</a>

‚≠ê New Features / Enhancements

* Allow customizing start log message in PushMeterRegistry implementations <a href="https://github.com/micrometer-metrics/micrometer/pull/4848" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4848/hovercard">#4848</a>
* Manage context-propagation version in micrometer-bom <a href="https://github.com/micrometer-metrics/micrometer/issues/4847" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4847/hovercard">#4847</a>
* Add support for Prometheus 1.x <a href="https://github.com/micrometer-metrics/micrometer/pull/4846" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4846/hovercard">#4846</a>
* "Failed to publish metrics to OTLP receiver" error message contains no actionable context <a href="https://github.com/micrometer-metrics/micrometer/pull/4829" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4829/hovercard">#4829</a>
* Support <code>@Counted</code> on classes <a href="https://github.com/micrometer-metrics/micrometer/issues/4746" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4746/hovercard">#4746</a>
* Publish a separate module with jdk11 classes <a href="https://github.com/micrometer-metrics/micrometer/pull/4728" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4728/hovercard">#4728</a>
* Make JettyClientMetrics compatible with Jetty12 <a href="https://github.com/micrometer-metrics/micrometer/issues/4609" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4609/hovercard">#4609</a>
* Make it possible to disable LongtaskTimer creation in DefaultMeterObservationHandler <a href="https://github.com/micrometer-metrics/micrometer/issues/4604" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4604/hovercard">#4604</a>
* Add Meter for process CPU time <a href="https://github.com/micrometer-metrics/micrometer/issues/4498" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4498/hovercard">#4498</a>
* Make Jetty server metrics work with Jetty 12 <a href="https://github.com/micrometer-metrics/micrometer/issues/4261" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4261/hovercard">#4261</a>
* OTLPMeterRegistry should adhere to OpenTelemetry data model for producing metrics <a href="https://github.com/micrometer-metrics/micrometer/issues/4053" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4053/hovercard">#4053</a>
* Asserting Observation keys and value should offer suggestions from the other cardinality bucket. <a href="https://github.com/micrometer-metrics/micrometer/issues/4046" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4046/hovercard">#4046</a>
* Ignore class level AOP annotation if method level present <a href="https://github.com/micrometer-metrics/micrometer/pull/3811" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/3811/hovercard">#3811</a>
* Remove v1 CloudWatch module <a href="https://github.com/micrometer-metrics/micrometer/issues/1473" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/1473/hovercard">#1473</a>
* Log CloudWatch metric data when publishing fails <a href="https://github.com/micrometer-metrics/micrometer/issues/1396" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/1396/hovercard">#1396</a>

üêû Bug Fixes

* JvmHeapPressureMetrics have incorrect base unit <a href="https://github.com/micrometer-metrics/micrometer/issues/3236" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/3236/hovercard">#3236</a>
* GC Pause time metric includes concurrent cycle time for Generational ZGC <a href="https://github.com/micrometer-metrics/micrometer/issues/4764" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4764/hovercard">#4764</a>
* OSGi import of javax.annotation and javax.annotation.meta is incorrect <a href="https://github.com/micrometer-metrics/micrometer/issues/4824" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4824/hovercard">#4824</a>
* Use Dynatrace snapshot for LongTaskTimer <a href="https://github.com/micrometer-metrics/micrometer/pull/4780" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4780/hovercard">#4780</a>
* CloudWatchMeterRegistry logs timeout message when there was an interrupt and does not log anything when there was a timeout <a href="https://github.com/micrometer-metrics/micrometer/issues/4775" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4775/hovercard">#4775</a>

üìî Documentation

* Document Java HttpClient instrumentation <a href="https://github.com/micrometer-metrics/micrometer/issues/4752" data-hovercard-type="issue" data-hovercard-url="/micrometer-metrics/micrometer/issues/4752/hovercard">#4752</a>

üî® Dependency Upgrades

* Bump com.google.cloud:google-cloud-monitoring from 3.35.0 to 3.37.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/4841" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4841/hovercard">#4841</a>
* Bump com.amazonaws:aws-java-sdk-cloudwatch from 1.12.655 to 1.12.674 <a href="https://github.com/micrometer-metrics/micrometer/pull/4835" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4835/hovercard">#4835</a>
* Bump software.amazon.awssdk:cloudwatch from 2.23.21 to 2.25.4 <a href="https://github.com/micrometer-metrics/micrometer/pull/4833" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4833/hovercard">#4833</a>
* Bump com.google.cloud:libraries-bom from 26.31.0 to 26.33.0 <a href="https://github.com/micrometer-metrics/micrometer/pull/4807" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4807/hovercard">#4807</a>
* Bump com.signalfx.public:signalfx-java from 1.0.38 to 1.0.39 <a href="https://github.com/micrometer-metrics/micrometer/pull/4805" data-hovercard-type="pull_request" data-hovercard-url="/micrometer-metrics/micrometer/pull/4805/hovercard">#4805</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/climategadgets/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/climategadgets">@climategadgets</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/izeye/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/izeye">@izeye</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/monosoul/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/monosoul">@monosoul</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/quaff/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/quaff">@quaff</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ponziani/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ponziani">@ponziani</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/simonzn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/simonzn">@simonzn</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/adpaste/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/adpaste">@adpaste</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/pirgeo/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pirgeo">@pirgeo</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/joakime/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/joakime">@joakime</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/lenin-jaganathan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lenin-jaganathan">@lenin-jaganathan</a>

