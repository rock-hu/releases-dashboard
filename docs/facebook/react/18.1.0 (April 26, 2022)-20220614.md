# 18.1.0 (April 26, 2022)

## release on 20220614

## description

## changes

React DOM

* Fix the false positive warning about <code>react-dom/client</code> when using UMD bundle. (<a href="https://github.com/alireza-molaee">@alireza-molaee</a> in <a href="https://github.com/facebook/react/pull/24274" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24274/hovercard">#24274</a>)
* Fix <code>suppressHydrationWarning</code> to work in production too. (<a href="https://github.com/gaearon">@gaearon</a> in <a href="https://github.com/facebook/react/pull/24271" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24271/hovercard">#24271</a>)
* Fix <code>componentWillUnmount</code> firing twice inside of Suspense. (<a href="https://github.com/acdlite">@acdlite</a> in <a href="https://github.com/facebook/react/pull/24308" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24308/hovercard">#24308</a>)
* Fix some transition updates being ignored. (<a href="https://github.com/acdlite">@acdlite</a> in <a href="https://github.com/facebook/react/pull/24353" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24353/hovercard">#24353</a>)
* Fix <code>useDeferredValue</code> causing an infinite loop when passed an unmemoized value. (<a href="https://github.com/acdlite">@acdlite</a> in <a href="https://github.com/facebook/react/pull/24247" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24247/hovercard">#24247</a>)
* Fix throttling of revealing Suspense fallbacks. (<a href="https://github.com/sunderls">@sunderls</a> in <a href="https://github.com/facebook/react/pull/24253" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24253/hovercard">#24253</a>)
* Fix an inconsistency in whether the props object is the same between renders. (<a href="https://github.com/Andarist">@Andarist</a> and <a href="https://github.com/acdlite">@acdlite</a> in <a href="https://github.com/facebook/react/pull/24421" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24421/hovercard">#24421</a>)
* Fix a missing warning about a <code>setState</code> loop in <code>useEffect</code>. (<a href="https://github.com/gaearon">@gaearon</a> in <a href="https://github.com/facebook/react/pull/24298" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24298/hovercard">#24298</a>)
* Fix a spurious hydration error. (<a href="https://github.com/gnoff">@gnoff</a> in <a href="https://github.com/facebook/react/pull/24404" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24404/hovercard">#24404</a>)
* Warn when calling <code>setState</code> in <code>useInsertionEffect</code>. (<a href="https://github.com/gaearon">@gaearon</a> in <a href="https://github.com/facebook/react/pull/24295" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24295/hovercard">#24295</a>)
* Ensure the reason for hydration errors is always displayed. (<a href="https://github.com/gaearon">@gaearon</a> in <a href="https://github.com/facebook/react/pull/24276" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24276/hovercard">#24276</a>)

React DOM Server

* Fix escaping for the <code>bootstrapScriptContent</code> contents. (<a href="https://github.com/gnoff">@gnoff</a> in <a href="https://github.com/facebook/react/pull/24385" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24385/hovercard">#24385</a>)
* Significantly improve performance of <code>renderToPipeableStream</code>. (<a href="https://github.com/gnoff">@gnoff</a> in <a href="https://github.com/facebook/react/pull/24291" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24291/hovercard">#24291</a>)

ESLint Plugin: React Hooks

* Fix false positive errors with a large number of branches. (<a href="https://github.com/scyron6">@scyron6</a> in <a href="https://github.com/facebook/react/pull/24287" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24287/hovercard">#24287</a>)
* Don't consider a known dependency stable when the variable is reassigned. (<a href="https://github.com/afzalsayed96">@afzalsayed96</a> in <a href="https://github.com/facebook/react/pull/24343" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24343/hovercard">#24343</a>)

Use Subscription

* Replace the implementation with the <code>use-sync-external-store</code> shim. (<a href="https://github.com/gaearon">@gaearon</a> in <a href="https://github.com/facebook/react/pull/24289" data-hovercard-type="pull_request" data-hovercard-url="/facebook/react/pull/24289/hovercard">#24289</a>)

