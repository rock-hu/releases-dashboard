# v0.81.0

## release on 20241014

## description

## changes

* <strong>[Breaking]</strong>: Drop support for Node.js < 18.18. (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2520133520" data-permission-text="Title is private" data-url="https://github.com/facebook/metro/issues/1351" data-hovercard-type="pull_request" data-hovercard-url="/facebook/metro/pull/1351/hovercard" href="https://github.com/facebook/metro/pull/1351">#1351</a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/vzaidman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vzaidman">@vzaidman</a>)
* <strong>[Breaking]</strong>: <a href="https://metrobundler.dev/docs/configuration#resolverequest" rel="nofollow">Custom resolvers</a> must now return absolute, real paths for any successful resolution. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/3b3e0aaf725cfa6907bf2c8b5fbc0da352d29efe/hovercard" href="https://github.com/facebook/metro/commit/3b3e0aaf725cfa6907bf2c8b5fbc0da352d29efe"><tt>3b3e0aa</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Breaking]</strong>: Don't call <code>context.redirectModulePath</code> from default resolver, use a fixed browser field spec implementation. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/5e96d176e3c14f1b56c8a75807b8901aa7eabf7d/hovercard" href="https://github.com/facebook/metro/commit/5e96d176e3c14f1b56c8a75807b8901aa7eabf7d"><tt>5e96d17</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Breaking]</strong> Resolver: Reserve import specifiers beginning '#' exclusively for future subpath imports support. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/c1c80c7727e01951a148e9f5a3d06196e98eaf72/hovercard" href="https://github.com/facebook/metro/commit/c1c80c7727e01951a148e9f5a3d06196e98eaf72"><tt>c1c80c7</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Breaking]</strong>: Disallow Haste modules with separators and Haste packages with invalid package names. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/4e9cc4b6dda9e9158c3cf276d05aace4aefe0d8e/hovercard" href="https://github.com/facebook/metro/commit/4e9cc4b6dda9e9158c3cf276d05aace4aefe0d8e"><tt>4e9cc4b</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Feature]</strong>: Expose <a href="https://metrobundler.dev/docs/resolution#resolution-context" rel="nofollow"><code>ResolutionContext.fileSystemLookup</code></a> for performing file and directory existence checks and resolving real paths. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/3b3e0aaf725cfa6907bf2c8b5fbc0da352d29efe/hovercard" href="https://github.com/facebook/metro/commit/3b3e0aaf725cfa6907bf2c8b5fbc0da352d29efe"><tt>3b3e0aa</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Feature]</strong>: Add <code>onClose</code> option to <code>Metro.runServer</code> configuration to provide a callback called when Metro is fully torn down. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/b3f141f1a7b864773fa10b4ce07227c16ba9ba7c/hovercard" href="https://github.com/facebook/metro/commit/b3f141f1a7b864773fa10b4ce07227c16ba9ba7c"><tt>b3f141f</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/vzaidman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vzaidman">@vzaidman</a>)
* <strong>[Fix]</strong>: Potential "hub is undefined" error during transform due to Babel cache pollution. (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2496850551" data-permission-text="Title is private" data-url="https://github.com/facebook/metro/issues/1340" data-hovercard-type="pull_request" data-hovercard-url="/facebook/metro/pull/1340/hovercard" href="https://github.com/facebook/metro/pull/1340">#1340</a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/vzaidman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vzaidman">@vzaidman</a>)
* <strong>[Fix]</strong>: Fix <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2510331892" data-permission-text="Title is private" data-url="https://github.com/facebook/metro/issues/1347" data-hovercard-type="issue" data-hovercard-url="/facebook/metro/issues/1347/hovercard" href="https://github.com/facebook/metro/issues/1347">#1347</a>, symlinked packages not respecting package.json redirections. (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2511969274" data-permission-text="Title is private" data-url="https://github.com/facebook/metro/issues/1349" data-hovercard-type="pull_request" data-hovercard-url="/facebook/metro/pull/1349/hovercard" href="https://github.com/facebook/metro/pull/1349">#1349</a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Fix]</strong>: <code>metro-memory-fs</code>: Respect <code>force</code> in <code>rmSync</code>. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/a792d85ffde3c21c3fbf64ac9404ab0afe5ff957/hovercard" href="https://github.com/facebook/metro/commit/a792d85ffde3c21c3fbf64ac9404ab0afe5ff957"><tt>a792d85</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Fix]</strong>: Don't eagerly create empty cache directories during <code>getDefaultConfig</code>. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/bfd9473f60830b5479d478d5f3346c1c93a725ee/hovercard" href="https://github.com/facebook/metro/commit/bfd9473f60830b5479d478d5f3346c1c93a725ee"><tt>bfd9473</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Fix]</strong>: Invalidate transform cache on changes to inline-requires implementation. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/7d02e173a63112b0044045496da60d9a6b85cd6b/hovercard" href="https://github.com/facebook/metro/commit/7d02e173a63112b0044045496da60d9a6b85cd6b"><tt>7d02e17</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Fix]</strong>: Resolver: Treat absolute path specifiers on Windows with the same strictness as posix, and allow absolute paths without drive letters. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/8f7e000641b37c423e31b7564f7bda588c17afcd/hovercard" href="https://github.com/facebook/metro/commit/8f7e000641b37c423e31b7564f7bda588c17afcd"><tt>8f7e000</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)

> NOTE: Experimental features are not covered by semver and can change at any time.

* <strong>[Experimental]</strong>: Remove redundant <code>unstable_enableSymlinks</code> - symlink support is stable and always-on. (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/e52b5ffb24d0388c26441457bb695b53f44a6960/hovercard" href="https://github.com/facebook/metro/commit/e52b5ffb24d0388c26441457bb695b53f44a6960"><tt>e52b5ff</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>)
* <strong>[Experimental]:</strong> Implement <code>transformer.unstable_memoizeInlineRequires</code> to optimise inlined access. (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2509920362" data-permission-text="Title is private" data-url="https://github.com/facebook/metro/issues/1346" data-hovercard-type="pull_request" data-hovercard-url="/facebook/metro/pull/1346/hovercard" href="https://github.com/facebook/metro/pull/1346">#1346</a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/robhogan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/robhogan">@robhogan</a>).
* <strong>[Experimental]</strong>: Add <code>unstable_server_log</code>, <code>unstable_server_menu_updated</code>, and <code>unstable_server_menu_cleared</code> reporter events (<a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/facebook/metro/commit/616f437432848abaff45c10a4a6da677fb85ddcd/hovercard" href="https://github.com/facebook/metro/commit/616f437432848abaff45c10a4a6da677fb85ddcd"><tt>616f437</tt></a> by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/huntie/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/huntie">@huntie</a>)

<strong>Full Changelog</strong>: <a class="commit-link" href="https://github.com/facebook/metro/compare/v0.80.11...v0.81.0"><tt>v0.80.11...v0.81.0</tt></a>

