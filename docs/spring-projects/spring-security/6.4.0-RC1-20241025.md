# 6.4.0-RC1

## release on 20241025

## description

## changes

‚≠ê New Features

* Add API for Looking Up Security Annotations <a href="https://github.com/spring-projects/spring-security/issues/15700" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15700/hovercard">#15700</a>
* Add loginPage() to DSL in reactive oauth2Login() <a href="https://github.com/spring-projects/spring-security/issues/15674" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15674/hovercard">#15674</a>
* Add public InMemoryOneTimeTokenService.setClock(Clock) <a href="https://github.com/spring-projects/spring-security/pull/15864" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15864/hovercard">#15864</a>
* Support One-Time Tokens in a Clustered Environment [<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2505584287" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-security/issues/15735" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15735/hovercard" href="https://github.com/spring-projects/spring-security/issues/15735">#15735</a>][https://github.com/<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2505584287" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-security/issues/15735" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15735/hovercard" href="https://github.com/spring-projects/spring-security/issues/15735">/issues/15735</a>]
* Add Reactive One-Time Token Login Kotlin DSL Support <a href="https://github.com/spring-projects/spring-security/pull/15888" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15888/hovercard">#15888</a>
* Add Support for Passkeys <a href="https://github.com/spring-projects/spring-security/issues/13305" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/13305/hovercard">#13305</a>
* Allow OAuth2ClientSpec to get ReactiveOAuth2AccessTokenResponseClient from Spring IoC <a href="https://github.com/spring-projects/spring-security/issues/11097" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/11097/hovercard">#11097</a>
* Allow access token request parameters to override defaults <a href="https://github.com/spring-projects/spring-security/pull/15339" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15339/hovercard">#15339</a>
* Allow building a ClientRegistration from provided configuration <a href="https://github.com/spring-projects/spring-security/pull/15716" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15716/hovercard">#15716</a>
* Allow logout+jwt JWT type for reactive <a href="https://github.com/spring-projects/spring-security/pull/15847" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15847/hovercard">#15847</a>
* AuthorizationEventPublisher should accept an AuthorizationResult <a href="https://github.com/spring-projects/spring-security/issues/15915" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15915/hovercard">#15915</a>
* AuthorizationManager should return AuthorizationResult <a href="https://github.com/spring-projects/spring-security/pull/14846" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/14846/hovercard">#14846</a>
* Clarify Username/Password Authentication Docs <a href="https://github.com/spring-projects/spring-security/pull/15806" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15806/hovercard">#15806</a>
* Customize the strategy for resolving the principal <a href="https://github.com/spring-projects/spring-security/pull/15833" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15833/hovercard">#15833</a>
* Introduce ExpressionJwtGrantedAuthoritiesConverter to extract nested authorities via SpEL expression <a href="https://github.com/spring-projects/spring-security/pull/15202" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15202/hovercard">#15202</a>
* Improve encapsulation for jwtValidators <a href="https://github.com/spring-projects/spring-security/pull/15879" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15879/hovercard">#15879</a>
* Improve readibility of empty collection checks <a href="https://github.com/spring-projects/spring-security/pull/15898" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15898/hovercard">#15898</a>
* Improved error message for PasswordEncoder <a href="https://github.com/spring-projects/spring-security/pull/14968" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/14968/hovercard">#14968</a>
* Make Security Observations Selectable <a href="https://github.com/spring-projects/spring-security/issues/15678" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15678/hovercard">#15678</a>
* ObjectProvider over custom getBeanOrNull method <a href="https://github.com/spring-projects/spring-security/pull/15816" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15816/hovercard">#15816</a>
* Parameters customizer called before all parameters are set <a href="https://github.com/spring-projects/spring-security/issues/15939" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15939/hovercard">#15939</a>
* Polish diamond operator usage <a href="https://github.com/spring-projects/spring-security/pull/15900" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15900/hovercard">#15900</a>
* Polish OAuth2ClientConfiguration <a href="https://github.com/spring-projects/spring-security/pull/15857" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15857/hovercard">#15857</a>
* Reactive oauth2Login should pick up OAuth2ReactiveUserService bean <a href="https://github.com/spring-projects/spring-security/pull/15848" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15848/hovercard">#15848</a>
* Replace Date().getTime() method with System.currentTimeMillis() <a href="https://github.com/spring-projects/spring-security/pull/15890" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15890/hovercard">#15890</a>
* Simplify Casting with ReactiveJwtDecoders <a href="https://github.com/spring-projects/spring-security/pull/15797" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15797/hovercard">#15797</a>
* Support refresh token for Token Exchange <a href="https://github.com/spring-projects/spring-security/issues/15534" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15534/hovercard">#15534</a>
* Update document <a href="https://github.com/spring-projects/spring-security/pull/15862" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15862/hovercard">#15862</a>
* Update javaDoc for DefaultOneTimeTokenSubmitPageGeneratingFilter <a href="https://github.com/spring-projects/spring-security/pull/15870" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15870/hovercard">#15870</a>
* Update websocket integration docs <a href="https://github.com/spring-projects/spring-security/pull/15438" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15438/hovercard">#15438</a>
* Use SessionAuthenticationStrategy for Remember-Me authentication <a href="https://github.com/spring-projects/spring-security/pull/15748" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15748/hovercard">#15748</a>

ü™≤ Bug Fixes

* Fix HttpSecurity Deprecation notices <a href="https://github.com/spring-projects/spring-security/pull/15827" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15827/hovercard">#15827</a>
* Minor fix in Kotlin docs for noSpringSecurityObservations <a href="https://github.com/spring-projects/spring-security/pull/15831" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15831/hovercard">#15831</a>
* OidcBackChannelLogoutTokenValidator should not construct when missing OIDC Provider Issuer <a href="https://github.com/spring-projects/spring-security/pull/15824" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15824/hovercard">#15824</a>
* Restore Framework version on Snapshot build <a href="https://github.com/spring-projects/spring-security/issues/15916" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15916/hovercard">#15916</a>
* The additionalParameters array parameter of OAuth2AuthorizationRequest causes the authorizationRequestUri to be incorrect <a href="https://github.com/spring-projects/spring-security/issues/15830" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15830/hovercard">#15830</a>

üî® Dependency Upgrades

* Bump ch.qos.logback:logback-classic from 1.5.10 to 1.5.11 <a href="https://github.com/spring-projects/spring-security/pull/15924" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15924/hovercard">#15924</a>
* Bump com.fasterxml.jackson:jackson-bom from 2.17.2 to 2.18.0 <a href="https://github.com/spring-projects/spring-security/pull/15859" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15859/hovercard">#15859</a>
* Bump io.freefair.gradle:aspectj-plugin from 8.10 to 8.10.2 <a href="https://github.com/spring-projects/spring-security/pull/15881" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15881/hovercard">#15881</a>
* Bump io.micrometer:micrometer-observation from 1.13.5 to 1.13.6 <a href="https://github.com/spring-projects/spring-security/pull/15918" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15918/hovercard">#15918</a>
* Bump io.mockk:mockk from 1.13.12 to 1.13.13 <a href="https://github.com/spring-projects/spring-security/pull/15895" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15895/hovercard">#15895</a>
* Bump io.projectreactor:reactor-bom from 2023.0.10 to 2023.0.11 <a href="https://github.com/spring-projects/spring-security/pull/15922" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15922/hovercard">#15922</a>
* Bump io.spring.develocity.conventions from 0.0.21 to 0.0.22 <a href="https://github.com/spring-projects/spring-security/pull/15871" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15871/hovercard">#15871</a>
* Bump org.hibernate.orm:hibernate-core from 6.6.0.Final to 6.6.1.Final <a href="https://github.com/spring-projects/spring-security/pull/15823" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15823/hovercard">#15823</a>
* Bump org.htmlunit:htmlunit from 4.4.0 to 4.5.0 <a href="https://github.com/spring-projects/spring-security/pull/15960" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15960/hovercard">#15960</a>
* Bump org.junit:junit-bom from 5.11.1 to 5.11.2 <a href="https://github.com/spring-projects/spring-security/pull/15882" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15882/hovercard">#15882</a>
* Bump org.mockito:mockito-bom from 5.14.1 to 5.14.2 <a href="https://github.com/spring-projects/spring-security/pull/15923" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15923/hovercard">#15923</a>
* Bump org.seleniumhq.selenium:htmlunit3-driver from 4.23.0 to 4.25.0 <a href="https://github.com/spring-projects/spring-security/pull/15959" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15959/hovercard">#15959</a>
* Bump org.seleniumhq.selenium:selenium-java from 4.24.0 to 4.25.0 <a href="https://github.com/spring-projects/spring-security/pull/15839" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15839/hovercard">#15839</a>
* Bump org.springframework.data:spring-data-bom from 2024.0.4 to 2024.0.5 <a href="https://github.com/spring-projects/spring-security/pull/15961" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15961/hovercard">#15961</a>
* Bump org.springframework.ldap:spring-ldap-core from 3.2.6 to 3.2.7 <a href="https://github.com/spring-projects/spring-security/pull/15942" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15942/hovercard">#15942</a>
* Bump org.springframework:spring-framework-bom from 6.2.0-RC1 to 6.2.0-RC2 <a href="https://github.com/spring-projects/spring-security/pull/15943" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15943/hovercard">#15943</a>

üî© Build Updates

* Bump <code>@antora</code>/collector-extension from 1.0.0-beta.2 to 1.0.0-beta.3 in /docs <a href="https://github.com/spring-projects/spring-security/pull/15911" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15911/hovercard">#15911</a>
* Bump <code>@springio</code>/asciidoctor-extensions from 1.0.0-alpha.13 to 1.0.0-alpha.14 in /docs <a href="https://github.com/spring-projects/spring-security/pull/15834" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15834/hovercard">#15834</a>
* Fix Broken Resource Server Doc Links <a href="https://github.com/spring-projects/spring-security/pull/15845" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15845/hovercard">#15845</a>
* Fix typo of createDefaultRequestMacher in WebSessionServerRequestCache <a href="https://github.com/spring-projects/spring-security/pull/15867" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15867/hovercard">#15867</a>
* Polish ExpressionTemplateSecurityAnnotationScanner <a href="https://github.com/spring-projects/spring-security/pull/15832" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-security/pull/15832/hovercard">#15832</a>
* Release 6.4.0-RC1 <a href="https://github.com/spring-projects/spring-security/issues/15966" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-security/issues/15966/hovercard">#15966</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/JohnNiang/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/JohnNiang">@JohnNiang</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/bottlerocketjonny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bottlerocketjonny">@bottlerocketjonny</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/c1rd3cm/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/c1rd3cm">@c1rd3cm</a>, <a class="user-mention notranslate" data-hovercard-type="organization" data-hovercard-url="/orgs/dependabot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dependabot">@dependabot</a>[bot], <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/franticticktick/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/franticticktick">@franticticktick</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/heruan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/heruan">@heruan</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jinia91/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jinia91">@jinia91</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/kse-music/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kse-music">@kse-music</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/kwonyonghyun/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kwonyonghyun">@kwonyonghyun</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ngocnhan-tran1996/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ngocnhan-tran1996">@ngocnhan-tran1996</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/nimakarimiank/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nimakarimiank">@nimakarimiank</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/openrefactorymunawar/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/openrefactorymunawar">@openrefactorymunawar</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/regiuss-own/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/regiuss-own">@regiuss-own</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/rs017991/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/rs017991">@rs017991</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sjohnr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sjohnr">@sjohnr</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/thomasdarimont/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thomasdarimont">@thomasdarimont</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/wapkch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wapkch">@wapkch</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/xhaggi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/xhaggi">@xhaggi</a>

