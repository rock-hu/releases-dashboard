# v6.1.7

## release on 20240516

## description

## changes

‚≠ê New Features

* ResponseEntity is not reliably closed with InputStreamResource <a href="https://github.com/spring-projects/spring-framework/issues/32802" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32802/hovercard">#32802</a>
* Accept ajc-compiled <code>@Aspect</code> classes for Spring AOP proxy usage <a href="https://github.com/spring-projects/spring-framework/issues/32793" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32793/hovercard">#32793</a>
* Failure to process a bean definition ahead-of-time with an instance supplier should provide more contextual information <a href="https://github.com/spring-projects/spring-framework/issues/32775" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32775/hovercard">#32775</a>
* Provide methods to unambiguously send form data with MockMvc <a href="https://github.com/spring-projects/spring-framework/issues/32757" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32757/hovercard">#32757</a>
* Introduce NoOp implementation for ResponseErrorHandler <a href="https://github.com/spring-projects/spring-framework/issues/32750" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32750/hovercard">#32750</a>
* Support varargs invocations in SpEL for varargs array subtype <a href="https://github.com/spring-projects/spring-framework/pull/32704" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-framework/pull/32704/hovercard">#32704</a>
* StreamUtils.copyRange overreads source stream in some cases <a href="https://github.com/spring-projects/spring-framework/issues/32695" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32695/hovercard">#32695</a>
* Modify error message when timeout is less than TIMEOUT_DEFAULT <a href="https://github.com/spring-projects/spring-framework/pull/32635" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-framework/pull/32635/hovercard">#32635</a>
* Jetty HttpConnections not closed with SSE on Jetty 12.0.7+ when clients close the connection <a href="https://github.com/spring-projects/spring-framework/issues/32629" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32629/hovercard">#32629</a>
* Prevent duplicate subscription ID's in destinationCache of DefaultSubscriptionRegistry <a href="https://github.com/spring-projects/spring-framework/issues/32625" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32625/hovercard">#32625</a>
* When retrieval of a LoadTimeWeaverAware bean fails the resulting exception message may not indicate why it was being created <a href="https://github.com/spring-projects/spring-framework/issues/32470" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32470/hovercard">#32470</a>

üêû Bug Fixes

* Do not send Cookie header in reactive JdkClientHttpRequest if no cookies added <a href="https://github.com/spring-projects/spring-framework/pull/32799" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-framework/pull/32799/hovercard">#32799</a>
* Inconsistent use of cleaned URLs in PathMatchingResourcePatternResolver <a href="https://github.com/spring-projects/spring-framework/issues/32828" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32828/hovercard">#32828</a>
* DeferredQueryInvocationHandler fails to unwrap QuerySqmImpl class outside of transaction <a href="https://github.com/spring-projects/spring-framework/issues/32766" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32766/hovercard">#32766</a>
* BindingReflectionHintsRegistrar#registerReflectionHints can be invoked with a null type <a href="https://github.com/spring-projects/spring-framework/issues/32753" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32753/hovercard">#32753</a>
* <code>AnnotationConfigWebApplicationContext</code> should propagate <code>ApplicationStartup</code> to <code>BeanFactory</code> <a href="https://github.com/spring-projects/spring-framework/issues/32747" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32747/hovercard">#32747</a>
* Ignore non-String keys in <code>PropertiesPropertySource.getPropertyNames()</code> <a href="https://github.com/spring-projects/spring-framework/issues/32742" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32742/hovercard">#32742</a>
* <code>MergedAnnotations</code> search does not find container for repeatable annotation <a href="https://github.com/spring-projects/spring-framework/issues/32731" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32731/hovercard">#32731</a>
* "multiple subscribers not supported" when using WebClient exchange <a href="https://github.com/spring-projects/spring-framework/issues/32727" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32727/hovercard">#32727</a>
* ConfigurationClassEnhancer should consistently trigger FastClass creation at build-time <a href="https://github.com/spring-projects/spring-framework/issues/32682" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32682/hovercard">#32682</a>
* HttpComponentsClientHttpRequestFactory does not set Content-Length: 0 <a href="https://github.com/spring-projects/spring-framework/issues/32678" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32678/hovercard">#32678</a>
* Wrong proxy generation order during AOT for classes with <code>ScopedProxyMode.TARGET\_CLASS</code> and advisors <a href="https://github.com/spring-projects/spring-framework/issues/32669" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32669/hovercard">#32669</a>
* Unhandled JMS listener exceptions are not propagated <a href="https://github.com/spring-projects/spring-framework/issues/32666" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32666/hovercard">#32666</a>
* beanFactory#getBean with arguments ignore them if an Instance supplier is defined <a href="https://github.com/spring-projects/spring-framework/issues/32657" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32657/hovercard">#32657</a>
* Incorrect AsyncRequestTimeoutException handling in ResponseEntityExceptionHandler <a href="https://github.com/spring-projects/spring-framework/issues/32644" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32644/hovercard">#32644</a>
* Include actual cause's message in various parsing exception messages <a href="https://github.com/spring-projects/spring-framework/pull/32636" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-framework/pull/32636/hovercard">#32636</a>
* Configuration class with Bean factory method on an interface generates wrong target with AOT <a href="https://github.com/spring-projects/spring-framework/issues/32609" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32609/hovercard">#32609</a>
* RestClient observations are stopped before ResponseSpec calls <a href="https://github.com/spring-projects/spring-framework/issues/32575" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32575/hovercard">#32575</a>
* MvcUriComponentsBuilder.fromMethodName does not pick the annotated method transparently <a href="https://github.com/spring-projects/spring-framework/issues/32553" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32553/hovercard">#32553</a>
* Deadlock/Stall in ConcurrentWebSocketSessionDecorator with Undertow 2.3.10 <a href="https://github.com/spring-projects/spring-framework/issues/32445" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32445/hovercard">#32445</a>
* RSocket setup payload can cause Netty ByteBuf leak <a href="https://github.com/spring-projects/spring-framework/issues/32424" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32424/hovercard">#32424</a>
* WebFlux temporary file not always deleted with parallel uploads. <a href="https://github.com/spring-projects/spring-framework/issues/31217" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/31217/hovercard">#31217</a>

üìî Documentation

* Replace RFC 7807 by RFC 9457 in documentation <a href="https://github.com/spring-projects/spring-framework/issues/32806" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32806/hovercard">#32806</a>
* Links to Framework and Servlet Javadoc from Framework's Kotlin API documentation are broken <a href="https://github.com/spring-projects/spring-framework/issues/32797" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32797/hovercard">#32797</a>
* Fix incorrect class reference syntax in Kotlin code sample <a href="https://github.com/spring-projects/spring-framework/pull/32733" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-framework/pull/32733/hovercard">#32733</a>
* Improve documentation advising against use of HandlerInterceptor for security <a href="https://github.com/spring-projects/spring-framework/issues/32729" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32729/hovercard">#32729</a>
* Inconsistent behaviour on transactional async method <a href="https://github.com/spring-projects/spring-framework/issues/32709" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32709/hovercard">#32709</a>
* Document that getBean with arguments is not recommended with AOT <a href="https://github.com/spring-projects/spring-framework/issues/32690" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32690/hovercard">#32690</a>
* Provide an example of custom request URL with RestClient in the reference guide <a href="https://github.com/spring-projects/spring-framework/issues/32685" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32685/hovercard">#32685</a>
* Correct documentation on streaming with MockMvcWebTestClient <a href="https://github.com/spring-projects/spring-framework/issues/32687" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32687/hovercard">#32687</a>
* Document limitations of CGLIB proxy class generation in JPMS module setups <a href="https://github.com/spring-projects/spring-framework/issues/32671" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32671/hovercard">#32671</a>
* Update links to HttpOnly documentation at OWASP in <code>ResponseCookie</code> <a href="https://github.com/spring-projects/spring-framework/pull/32663" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-framework/pull/32663/hovercard">#32663</a>
* Document that RestTemplate may not return a body for certain exceptions <a href="https://github.com/spring-projects/spring-framework/issues/32641" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32641/hovercard">#32641</a>
* Document that DataIntegrityViolationException can also be thrown on read-only queries <a href="https://github.com/spring-projects/spring-framework/issues/32631" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32631/hovercard">#32631</a>
* Update documentation to explain streaming vs collecting and error handling with <code>Flux&lt;T&gt;</code> return values <a href="https://github.com/spring-projects/spring-framework/issues/32630" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32630/hovercard">#32630</a>
* Revise "The IoC Container" section to be more relevant for modern Spring applications <a href="https://github.com/spring-projects/spring-framework/issues/32429" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32429/hovercard">#32429</a>
* XML bean definition with <code>factory-method</code> does not always determine correct target type <a href="https://github.com/spring-projects/spring-framework/issues/32091" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32091/hovercard">#32091</a>
* Document <code>@Order</code> behavior on types, bean methods, and config classes <a href="https://github.com/spring-projects/spring-framework/issues/30177" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/30177/hovercard">#30177</a>
* Clarify recommendation on self-injection for legitimate use cases (e.g. <code>@Transactional</code> re-entrant calls) <a href="https://github.com/spring-projects/spring-framework/issues/28299" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/28299/hovercard">#28299</a>

üî® Dependency Upgrades

* Upgrade to Micrometer 1.12.6 <a href="https://github.com/spring-projects/spring-framework/issues/32810" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32810/hovercard">#32810</a>
* Upgrade to Reactor 2023.0.6 <a href="https://github.com/spring-projects/spring-framework/issues/32786" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-framework/issues/32786/hovercard">#32786</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/LeMikaelF/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/LeMikaelF">@LeMikaelF</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Seungpang/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Seungpang">@Seungpang</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/izeye/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/izeye">@izeye</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/m4tt30c91/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/m4tt30c91">@m4tt30c91</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/remeio/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/remeio">@remeio</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/yhao3/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/yhao3">@yhao3</a>

