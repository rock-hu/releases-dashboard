# v6.3.0-M1

## release on 20240221

## description

## changes

‚≠ê New Features

* Provide a convenient API <code>MockIntegrationContext.substituteTriggerFor(String pollingAdapterId, Trigger trigger)</code> <a href="https://github.com/spring-projects/spring-integration/issues/8901" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8901/hovercard">#8901</a>
* Copy failed message headers into an <code>ErrorMessage</code> produced by the <code>ExpressionEvaluatingRequestHandlerAdvice</code> <a href="https://github.com/spring-projects/spring-integration/issues/8893" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8893/hovercard">#8893</a>
* <code>FluxMessageChannel</code>: propagate the current context from producer to consumer <a href="https://github.com/spring-projects/spring-integration/issues/8889" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8889/hovercard">#8889</a>
* Expose <code>Expression</code>-based options on the <code>FileTransferringMessageHandlerSpec</code> <a href="https://github.com/spring-projects/spring-integration/issues/8851" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8851/hovercard">#8851</a>
* Support for fine-grained configuration for each MqttSubscription in Spring Integration. <a href="https://github.com/spring-projects/spring-integration/issues/8850" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8850/hovercard">#8850</a>
* Remove <code>spring-integation-security</code> module <a href="https://github.com/spring-projects/spring-integration/issues/8836" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8836/hovercard">#8836</a>

üêû Bug Fixes

* Fix race condition in the <code>DelayHandler</code> <a href="https://github.com/spring-projects/spring-integration/issues/8894" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8894/hovercard">#8894</a>
* Fix LogMessage formatting placeholders in MqttHeaderMapper.java <a href="https://github.com/spring-projects/spring-integration/pull/8888" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8888/hovercard">#8888</a>
* Spring Integration hits a bug in Paho client with $share/ MQTT subscriptions <a href="https://github.com/spring-projects/spring-integration/issues/8879" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8879/hovercard">#8879</a>
* Mqttv5PahoMessageDrivenChannelAdapter.addTopic(topic, qos) throws IndexOutOfBoundsException <a href="https://github.com/spring-projects/spring-integration/issues/8873" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8873/hovercard">#8873</a>
* RedisLockRegistry setExecutor nullPointerException <a href="https://github.com/spring-projects/spring-integration/issues/8869" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8869/hovercard">#8869</a>
* Adjust <code>ThreadPoolTaskScheduler</code> bean registration to use <code>Integer.MAX\_VALUE / 2</code> phase <a href="https://github.com/spring-projects/spring-integration/issues/8856" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8856/hovercard">#8856</a>
* The <code>TcpNetServerConnectionFactory.run()</code> must not block on the loop forever <a href="https://github.com/spring-projects/spring-integration/issues/8852" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8852/hovercard">#8852</a>

üìî Documentation

* MqttProtocolErrorEvent.java: Typo fix occured -> occurred. <a href="https://github.com/spring-projects/spring-integration/pull/8942" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8942/hovercard">#8942</a>

üî® Dependency Upgrades

* Bump org.jruby:jruby-complete from 9.4.5.0 to 9.4.6.0 <a href="https://github.com/spring-projects/spring-integration/pull/8948" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8948/hovercard">#8948</a>
* Bump io.projectreactor:reactor-bom from 2023.0.2 to 2023.0.3 <a href="https://github.com/spring-projects/spring-integration/pull/8907" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8907/hovercard">#8907</a>
* Bump com.fasterxml.jackson:jackson-bom from 2.15.3 to 2.15.4 <a href="https://github.com/spring-projects/spring-integration/pull/8906" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8906/hovercard">#8906</a>
* Bump org.springframework:spring-framework-bom from 6.1.3 to 6.1.4 <a href="https://github.com/spring-projects/spring-integration/pull/8905" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8905/hovercard">#8905</a>
* Bump org.aspectj:aspectjweaver from 1.9.21 to 1.9.21.1 <a href="https://github.com/spring-projects/spring-integration/pull/8902" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8902/hovercard">#8902</a>
* Bump org.junit:junit-bom from 5.10.1 to 5.10.2 <a href="https://github.com/spring-projects/spring-integration/pull/8897" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8897/hovercard">#8897</a>
* Bump com.icegreen:greenmail from 2.1.0-alpha-3 to 2.1.0-alpha-4 <a href="https://github.com/spring-projects/spring-integration/pull/8887" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8887/hovercard">#8887</a>
* Bump debeziumVersion from 2.5.0.Final to 2.5.1.Final <a href="https://github.com/spring-projects/spring-integration/pull/8886" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8886/hovercard">#8886</a>
* Upgrade to <code>com.jayway.jsonpath:json-path:2.9.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8884" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8884/hovercard">#8884</a>
* Bump graalvmVersion from 23.1.1 to 23.1.2 <a href="https://github.com/spring-projects/spring-integration/pull/8867" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8867/hovercard">#8867</a>
* Bump org.apache.groovy:groovy-bom from 5.0.0-alpha-4 to 5.0.0-alpha-5 <a href="https://github.com/spring-projects/spring-integration/pull/8866" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8866/hovercard">#8866</a>
* Bump org.springframework:spring-framework-bom from 6.1.2 to 6.1.3 <a href="https://github.com/spring-projects/spring-integration/pull/8862" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8862/hovercard">#8862</a>
* Bump io.lettuce:lettuce-core from 6.3.0.RELEASE to 6.3.1.RELEASE <a href="https://github.com/spring-projects/spring-integration/pull/8861" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8861/hovercard">#8861</a>
* Bump org.springframework.ws:spring-ws-bom from 4.0.9 to 4.0.10 <a href="https://github.com/spring-projects/spring-integration/pull/8860" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8860/hovercard">#8860</a>
* Bump io.projectreactor:reactor-bom from 2023.0.1 to 2023.0.2 <a href="https://github.com/spring-projects/spring-integration/pull/8859" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8859/hovercard">#8859</a>
* Bump org.apache.logging.log4j:log4j-bom from 2.22.0 to 2.22.1 <a href="https://github.com/spring-projects/spring-integration/pull/8849" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8849/hovercard">#8849</a>
* Bump org.apache.groovy:groovy-bom from 5.0.0-alpha-3 to 5.0.0-alpha-4 <a href="https://github.com/spring-projects/spring-integration/pull/8848" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8848/hovercard">#8848</a>
* Upgrade to Resilience4J <code>2.2.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8847" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8847/hovercard">#8847</a>
* Upgrade to PostgreSQL <code>42.7.1</code> <a href="https://github.com/spring-projects/spring-integration/issues/8846" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8846/hovercard">#8846</a>
* Upgrade to Mockito <code>5.8.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8845" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8845/hovercard">#8845</a>
* Upgrade to Micrometer <code>1.13.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8843" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8843/hovercard">#8843</a>
* Upgrade to Spring Data <code>2023.2.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8842" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8842/hovercard">#8842</a>
* Upgrade to Smack <code>4.5.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8841" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8841/hovercard">#8841</a>
* Upgrade to Google Protobuf <code>4.0.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8840" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8840/hovercard">#8840</a>
* Upgrade to Apache Groovy <code>5.0.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8839" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8839/hovercard">#8839</a>
* Upgrade to GraalVM <code>23.1.1</code> <a href="https://github.com/spring-projects/spring-integration/issues/8838" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8838/hovercard">#8838</a>
* Upgrade to Apache Camel <code>4.3.0</code> <a href="https://github.com/spring-projects/spring-integration/issues/8837" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-integration/issues/8837/hovercard">#8837</a>
* Bump debeziumVersion from 2.5.0.CR1 to 2.5.0.Final <a href="https://github.com/spring-projects/spring-integration/pull/8834" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-integration/pull/8834/hovercard">#8834</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/wilx/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wilx">@wilx</a>

