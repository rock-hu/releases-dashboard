# v5.0.4

## release on 20231123

## description

## changes

üêû Bug fixes

* Starting a flow with <code>Flow#next</code> makes the first step execute twice <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1857671293" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4432" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4432/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4432">#4432</a>
* <code>DefaultJobParametersExtractor</code> no longer copies keys from <code>JobParameters</code> when not contained in <code>ExecutionContext</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1924108229" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4458" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4458/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4458">#4458</a>
* job scope bean doesn't cleanup in unit test <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="538711141" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/1288" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/1288/hovercard" href="https://github.com/spring-projects/spring-batch/issues/1288">#1288</a>
* <code>NullPointerException</code> in <code>RepeatTemplate#doHandle()</code> when <code>unwrapIfRethrown()</code> returns null if logging in DEBUG <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="538707222" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/1123" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/1123/hovercard" href="https://github.com/spring-projects/spring-batch/issues/1123">#1123</a>

üöÄ Enhancements

* Inaccurate exception message in <code>SimpleJobRepository</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1044982093" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4025" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4025/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4025">#4025</a>
* Remove unnecessary expressions in <code>AsyncItemWriter</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1013188870" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4009" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4009/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4009">#4009</a>

üìî Documentation

* Documentation unclear on how to replace deprecated <code>AbstractTaskletStepBuilder#throttleLimit</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1730554183" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4389" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4389/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4389">#4389</a>
* Outdated Meta-data ERD <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1682810884" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4358" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4358/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4358">#4358</a>
* Incorrect JavaDoc for Methods returning <code>JobFlowBuilder</code> in <code>JobBuilder</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1803763263" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4415" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4415/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4415">#4415</a>
* Incorrect Javadoc in <code>DefaultFieldSet</code> and <code>DefaultFieldSetFactory</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2003814280" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4494" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4494/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4494">#4494</a>
* Update documentation about serializable keys in the execution context <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1923696005" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4457" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4457/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4457">#4457</a>

üÜô Dependency Upgrades

* Spring Framework: 6.0.14
* Spring Retry: 2.0.4
* Spring AMQP: 3.0.10
* Spring Data: 3.0.12
* Spring Integration: 6.0.9
* Spring Kafka: 3.0.13
* Spring LDAP: 3.0.6
* Micrometer: 1.10.13

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release!

*** ** * ** ***

Full change log: <a class="commit-link" href="https://github.com/spring-projects/spring-batch/compare/v5.0.3...v5.0.4"><tt>v5.0.3...v5.0.4</tt></a>

