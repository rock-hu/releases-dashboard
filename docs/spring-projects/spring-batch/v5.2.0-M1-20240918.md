# v5.2.0-M1

## release on 20240918

## description

## changes

‚≠ê New features

* Add support for data classes in <code>JdbcCursorItemReaderBuilder</code> & <code>JdbcPagingItemReaderBuilder</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2244602308" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4578" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4578/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4578">#4578</a>
* Add support for query hints in JPA item readers <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1974239784" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4479" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4479/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4479">#4479</a>
* Add possibility to configure line separator in <code>RecursiveCollectionLineAggregator</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2295263108" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4594" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4594/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4594">#4594</a>
* Revisit the mechanism of job registration <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2120412322" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4547" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4547/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4547">#4547</a>
* Add <code>JobRegistrySmartInitializingSingleton</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2046940658" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4521" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4521/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4521">#4521</a>

üêû Bug fixes

* Incorrect bean configuration in <code>DefaultBatchConfiguration</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2118653484" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4543" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4543/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4543">#4543</a>
* <code>BeanPostProcessorChecker.postProcessAfterInitialization</code> WARNING after upgrade spring-framework-6.1.0 <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1998510618" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4489" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4489/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4489">#4489</a>
* Possible duplicate state transitions in flow definition <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="571908713" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/3674" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/3674/hovercard" href="https://github.com/spring-projects/spring-batch/issues/3674">#3674</a>
* Order of Transition Elements Still Does Not completely adhere to documentation <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="993253507" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/3996" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/3996/hovercard" href="https://github.com/spring-projects/spring-batch/issues/3996">#3996</a>
* Memory leak in <code>MessageChannelPartitionHandler</code> when polling the database <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2303238974" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4598" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4598/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4598">#4598</a>
* <code>ListItemWriter&lt;T&gt;::getWrittenItems</code> has bad wildcard return type <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2241607044" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4576" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4576/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4576">#4576</a>
* <code>SimpleBinaryBufferedReaderFactory</code> misses line endings <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="538700514" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/811" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/811/hovercard" href="https://github.com/spring-projects/spring-batch/issues/811">#811</a>
* <code>StepExecution.getEndTime()</code> returns null in <code>StepExecutionListener.afterStep()</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="803144039" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/3846" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/3846/hovercard" href="https://github.com/spring-projects/spring-batch/issues/3846">#3846</a>
* Default value for <code>ignoreWarnings</code> in <code>JdbcCursorItemReaderBuilder</code> does not align with documentation <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2221180898" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4570" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4570/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4570">#4570</a>
* Remote partitioning doesn't work if you're using graalvm <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2174594798" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4564" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4564/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4564">#4564</a>
* <code>SystemCommandTasklet</code> does not propagate errors <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1985319633" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4483" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4483/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4483">#4483</a>
* Incorrect Chunk property value in implementation of <code>ItemWriter</code> write method <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2167551549" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4560" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4560/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4560">#4560</a>
* Incorrect step configuration when setting the taskExecutor before <code>faultTolerant()</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1874522976" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4438" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4438/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4438">#4438</a>
* Incorrect deprecation in <code>MongoPagingItemReader</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2139002153" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4552" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4552/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4552">#4552</a>
* <code>JobRepository.deleteJobInstance()</code> Fails with Foreign Key Constraint Violation if Job Executions have Step Executions <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1722413947" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4382" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4382/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4382">#4382</a>
* <code>DefaultJobParametersConverter</code> throws <code>java.lang.ArrayIndexOutOfBoundsException</code> if input is empty string <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2020940362" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4505" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4505/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4505">#4505</a>

üöÄ Enhancements

* Use <code>Threadlocal.remove()</code> instead of <code>Threadlocal.set(null)</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2311183650" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4601" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4601/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4601">#4601</a>
* Performance issue in <code>DefaultFieldSet</code> due to the usage of <code>SimpleDateFormat</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="538718508" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/1694" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/1694/hovercard" href="https://github.com/spring-projects/spring-batch/issues/1694">#1694</a>
* Improve Error Messages in <code>JobParametersBuilder</code> methods <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2256948213" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4581" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4581/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4581">#4581</a>
* Implement <code>jumpToItem</code> in <code>JsonItemReader</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2164988906" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4557" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4557/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4557">#4557</a>
* Maintain similar ordering of elements between <code>DefaultStateTransitionComparator</code> and <code>FlowJobBuilder</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2062782914" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4527" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4527/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4527">#4527</a>
* Avoid collection copying <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2149314932" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4553" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4553/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4553">#4553</a>
* Make util classes to follow code style guide <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2119921609" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4545" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4545/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4545">#4545</a>
* Use annotation <code>@Override</code> consistently <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2033882016" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4512" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4512/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4512">#4512</a>
* Check dirty flag of step execution context before update in inner loop <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2018282981" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4503" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4503/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4503">#4503</a>

üìî Documentation

* Flow order priority does not match documented behavior <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1911360849" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4456" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4456/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4456">#4456</a>
* Incorrect link to batch reference documentation on project page <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2410766245" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4637" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4637/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4637">#4637</a>
* Typo in architecture doc <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2325161201" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4607" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4607/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4607">#4607</a>
* Grammatical error in restart.adoc <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2308345409" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4600" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4600/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4600">#4600</a>
* Incorrect link in appendix <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2296975583" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4595" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4595/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4595">#4595</a>
* Missing information about error handling in <code>ChunkListener</code>s <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1723347183" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4384" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4384/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4384">#4384</a>
* Improve Javadoc regarding the sort order in <code>RepositoryItemReader</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1933855454" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4462" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4462/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4462">#4462</a>
* Fix code sample that uses deprecated <code>StepBuilderFactory</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2260912149" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4582" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4582/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4582">#4582</a>
* Misleading documentation on <code>ItemWriteListener</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1764975327" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4400" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4400/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4400">#4400</a>
* Incorrect code example in documentation <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2135612891" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4550" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-batch/pull/4550/hovercard" href="https://github.com/spring-projects/spring-batch/pull/4550">#4550</a>
* Reference Documentation Uses Deprecated Class <code>StepExecutionListenerSupport</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2106428130" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4538" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4538/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4538">#4538</a>
* Incorrect Type of getter in Documentation for <code>JobParameters#getDouble</code> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2060130289" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4526" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4526/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4526">#4526</a>
* UI Aligment Issue - Spring Batch Version Number in Docs <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2092457009" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4534" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4534/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4534">#4534</a>

üÜô Dependency Upgrades

* Spring Framework: 6.2.0-RC1
* Spring Retry: 2.0.9
* Micrometer: 1.14.0-M3
* Spring Integration: 6.4.0-M3
* Spring AMQP: 3.2.0-M3
* Spring Kafka: 3.3.0-M3
* Spring Data: 3.4.0-M1
* Spring Ldap: 3.2.6

üî® Tasks

* Remove deprecated APIs scheduled for removal in v5.2.0 <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1758214980" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4398" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4398/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4398">#4398</a>
* Regression in javadocs deployment script <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2025890111" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-batch/issues/4511" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-batch/issues/4511/hovercard" href="https://github.com/spring-projects/spring-batch/issues/4511">#4511</a>

‚ù§Ô∏è Contributors

Many thanks to all contributors who worked on this release!

*** ** * ** ***

Full change log: <a class="commit-link" href="https://github.com/spring-projects/spring-batch/compare/v5.1.2...v5.2.0-M1"><tt>v5.1.2...v5.2.0-M1</tt></a>

