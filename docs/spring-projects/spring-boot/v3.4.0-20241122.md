# v3.4.0

## release on 20241122
## description
## changes
‚≠ê New Features

* Add withDefaultRequestConfigCustomizer method to HttpComponentsClientHttpRequestFactoryBuilder <a href="https://github.com/spring-projects/spring-boot/issues/43139" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43139/hovercard">#43139</a>
* Fail JsonWriter if duplicate names are detected <a href="https://github.com/spring-projects/spring-boot/issues/43041" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43041/hovercard">#43041</a>
* Add JsonObjectDeserializer.nullSafeValue method that accepts a mapper Function <a href="https://github.com/spring-projects/spring-boot/issues/42972" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42972/hovercard">#42972</a>
* Support timeout property for GraphQL over SSE <a href="https://github.com/spring-projects/spring-boot/pull/42966" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-boot/pull/42966/hovercard">#42966</a>
* Improve performance of ConfigurationPropertiesBinder by storing bind handlers on first access <a href="https://github.com/spring-projects/spring-boot/issues/42950" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42950/hovercard">#42950</a>
* Improve performance of ConcurrentReferenceCachingMetadataReaderFactory <a href="https://github.com/spring-projects/spring-boot/issues/42949" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42949/hovercard">#42949</a>
* Log warning in HikariCheckpointRestoreLifecycle if pool suspension isn't configured <a href="https://github.com/spring-projects/spring-boot/pull/42937" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-boot/pull/42937/hovercard">#42937</a>
* Remove spring-boot-starter-aop dependency from spring-boot-starter-data-jpa and spring-boot-starter-integration <a href="https://github.com/spring-projects/spring-boot/issues/42934" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42934/hovercard">#42934</a>

üêû Bug Fixes

* Jersey body handling is inconsistent with Spring Webflux and Spring MVC <a href="https://github.com/spring-projects/spring-boot/issues/43209" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43209/hovercard">#43209</a>
* Classes are accidentally named "structure logging" instead of "structured logging" <a href="https://github.com/spring-projects/spring-boot/pull/43203" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-boot/pull/43203/hovercard">#43203</a>
* StructuredLoggingJsonProperties customizer should be a Class reference rather than a String <a href="https://github.com/spring-projects/spring-boot/issues/43202" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43202/hovercard">#43202</a>
* Cannot package OCI image when 'docker.io/paketobuildpacks/new-relic' is provided as a buildpack <a href="https://github.com/spring-projects/spring-boot/issues/43171" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43171/hovercard">#43171</a>
* Incorrect Type for 'management.endpoints.access.default' defined in additional-spring-configuration-metadata.json <a href="https://github.com/spring-projects/spring-boot/issues/43154" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43154/hovercard">#43154</a>
* WebServerPortFileWriter fails when using a portfile without extension <a href="https://github.com/spring-projects/spring-boot/issues/43117" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43117/hovercard">#43117</a>
* SslOptions.isSpecified() only returns true if ciphers and enabled protocols are set <a href="https://github.com/spring-projects/spring-boot/issues/43084" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43084/hovercard">#43084</a>
* SslHealthIndicator throws NullPointerException when using SslBundle with SslStoreBundle.NONE <a href="https://github.com/spring-projects/spring-boot/issues/43078" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43078/hovercard">#43078</a>
* JdkClientHttpRequestFactoryBuilder and JettyClientHttpRequestFactoryBuilder do not set Ciphers or Enabled Protocols <a href="https://github.com/spring-projects/spring-boot/issues/43077" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43077/hovercard">#43077</a>
* Root cause of errors is hidden when loading images from archive <a href="https://github.com/spring-projects/spring-boot/issues/43070" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43070/hovercard">#43070</a>
* mvn spring-boot:run fails on Windows with "Could Not Find or Load Main Class" when path contains non-ASCII characters <a href="https://github.com/spring-projects/spring-boot/issues/43062" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43062/hovercard">#43062</a>
* A <code>@SpyBean</code> on the output of a FactoryBean is not reset <a href="https://github.com/spring-projects/spring-boot/issues/43053" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43053/hovercard">#43053</a>
* Logback logging system does not process URLs with paths not ending in .xml <a href="https://github.com/spring-projects/spring-boot/issues/42990" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42990/hovercard">#42990</a>
* Bean-based conditions do not consider factory beans correctly when determining if they are a candidate <a href="https://github.com/spring-projects/spring-boot/issues/42970" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42970/hovercard">#42970</a>
* NPE in bootBuildImage when setting DOCKER_CONTEXT=default <a href="https://github.com/spring-projects/spring-boot/issues/42960" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42960/hovercard">#42960</a>
* Warning due to duplicate MockResolver extensions <a href="https://github.com/spring-projects/spring-boot/issues/42957" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42957/hovercard">#42957</a>
* HttpHostConnectException is thrown when using buildpacks with Gradle or Maven on Windows <a href="https://github.com/spring-projects/spring-boot/issues/42952" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42952/hovercard">#42952</a>
* build-info doesn't support seconds since the epoch from project.build.outputTimestamp <a href="https://github.com/spring-projects/spring-boot/issues/42936" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42936/hovercard">#42936</a>
* NPE in OnClassCondition.resolveOutcomesThreaded following thread interruption because firstHalf is null <a href="https://github.com/spring-projects/spring-boot/issues/42926" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42926/hovercard">#42926</a>
* Default WebSocketMessageBrokerConfigurer is always overriding custom channel executor <a href="https://github.com/spring-projects/spring-boot/issues/42924" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42924/hovercard">#42924</a>
* X-Registry-Auth header sent to Docker Engine API contains field "authHeader" <a href="https://github.com/spring-projects/spring-boot/issues/42915" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42915/hovercard">#42915</a>
* ApplicationContextRunner has inconsistent behaviour with duplicate auto-configuration class names <a href="https://github.com/spring-projects/spring-boot/issues/17963" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/17963/hovercard">#17963</a>

üìî Documentation

* Migrate class references to full javadoc links <a href="https://github.com/spring-projects/spring-boot/issues/43239" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43239/hovercard">#43239</a>
* Documentation for 'spring.datasource.type' is misleading <a href="https://github.com/spring-projects/spring-boot/issues/43199" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43199/hovercard">#43199</a>
* Update "Upgrading From" section to use "2.x" <a href="https://github.com/spring-projects/spring-boot/issues/43160" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43160/hovercard">#43160</a>
* Include spring-boot-loader in API documentation <a href="https://github.com/spring-projects/spring-boot/issues/43153" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43153/hovercard">#43153</a>
* Document how and where to add custom GraalVM configuration files <a href="https://github.com/spring-projects/spring-boot/issues/43074" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43074/hovercard">#43074</a>
* Rework DataSource configuration examples to separate defining an additional DataSource and defining a DataSource of a different type <a href="https://github.com/spring-projects/spring-boot/issues/43059" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43059/hovercard">#43059</a>
* Location of the layers schema is incorrect in the Maven Plugin's examples <a href="https://github.com/spring-projects/spring-boot/issues/43033" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43033/hovercard">#43033</a>
* Link to Eclipse setup instructions <a href="https://github.com/spring-projects/spring-boot/issues/42954" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42954/hovercard">#42954</a>
* Fix link to Checkpoint and Restore status page <a href="https://github.com/spring-projects/spring-boot/issues/42939" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/42939/hovercard">#42939</a>

üî® Dependency Upgrades

* Upgrade to ActiveMQ 6.1.4 <a href="https://github.com/spring-projects/spring-boot/issues/43128" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43128/hovercard">#43128</a>
* Upgrade to Byte Buddy 1.15.10 <a href="https://github.com/spring-projects/spring-boot/issues/43097" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43097/hovercard">#43097</a>
* Upgrade to Couchbase Client 3.7.5 <a href="https://github.com/spring-projects/spring-boot/issues/43098" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43098/hovercard">#43098</a>
* Upgrade to Elasticsearch Client 8.15.4 <a href="https://github.com/spring-projects/spring-boot/issues/43129" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43129/hovercard">#43129</a>
* Upgrade to Flyway 10.20.1 <a href="https://github.com/spring-projects/spring-boot/issues/43130" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43130/hovercard">#43130</a>
* Upgrade to Groovy 4.0.24 <a href="https://github.com/spring-projects/spring-boot/issues/43099" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43099/hovercard">#43099</a>
* Upgrade to Hibernate 6.6.2.Final <a href="https://github.com/spring-projects/spring-boot/issues/43100" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43100/hovercard">#43100</a>
* Upgrade to HttpClient5 5.4.1 <a href="https://github.com/spring-projects/spring-boot/issues/43102" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43102/hovercard">#43102</a>
* Upgrade to Infinispan 15.0.11.Final <a href="https://github.com/spring-projects/spring-boot/issues/43131" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43131/hovercard">#43131</a>
* Upgrade to Jackson Bom 2.18.1 <a href="https://github.com/spring-projects/spring-boot/issues/43103" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43103/hovercard">#43103</a>
* Upgrade to Jetty 12.0.15 <a href="https://github.com/spring-projects/spring-boot/issues/43104" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43104/hovercard">#43104</a>
* Upgrade to jOOQ 3.19.15 <a href="https://github.com/spring-projects/spring-boot/issues/43105" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43105/hovercard">#43105</a>
* Upgrade to Kafka 3.8.1 <a href="https://github.com/spring-projects/spring-boot/issues/43106" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43106/hovercard">#43106</a>
* Upgrade to Lettuce 6.4.1.RELEASE <a href="https://github.com/spring-projects/spring-boot/issues/43185" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43185/hovercard">#43185</a>
* Upgrade to Logback 1.5.12 <a href="https://github.com/spring-projects/spring-boot/issues/43107" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43107/hovercard">#43107</a>
* Upgrade to Lombok 1.18.36 <a href="https://github.com/spring-projects/spring-boot/issues/43186" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43186/hovercard">#43186</a>
* Upgrade to Maven Dependency Plugin 3.8.1 <a href="https://github.com/spring-projects/spring-boot/issues/43108" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43108/hovercard">#43108</a>
* Upgrade to Maven Failsafe Plugin 3.5.2 <a href="https://github.com/spring-projects/spring-boot/issues/43109" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43109/hovercard">#43109</a>
* Upgrade to Maven Surefire Plugin 3.5.2 <a href="https://github.com/spring-projects/spring-boot/issues/43110" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43110/hovercard">#43110</a>
* Upgrade to Micrometer 1.14.1 <a href="https://github.com/spring-projects/spring-boot/issues/43187" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43187/hovercard">#43187</a>
* Upgrade to Micrometer Tracing 1.4.0 <a href="https://github.com/spring-projects/spring-boot/issues/43120" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43120/hovercard">#43120</a>
* Upgrade to MongoDB 5.2.1 <a href="https://github.com/spring-projects/spring-boot/issues/43111" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43111/hovercard">#43111</a>
* Upgrade to Netty 4.1.115.Final <a href="https://github.com/spring-projects/spring-boot/issues/43133" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43133/hovercard">#43133</a>
* Upgrade to Prometheus Client 1.3.3 <a href="https://github.com/spring-projects/spring-boot/issues/43112" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43112/hovercard">#43112</a>
* Upgrade to Pulsar Reactive 0.5.9 <a href="https://github.com/spring-projects/spring-boot/issues/43188" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43188/hovercard">#43188</a>
* Upgrade to Reactor Bom 2024.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/43015" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43015/hovercard">#43015</a>
* Upgrade to Spring AMQP 3.2.0 <a href="https://github.com/spring-projects/spring-boot/issues/43016" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43016/hovercard">#43016</a>
* Upgrade to Spring Authorization Server 1.4.0 <a href="https://github.com/spring-projects/spring-boot/issues/43017" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43017/hovercard">#43017</a>
* Upgrade to Spring Batch 5.2.0 <a href="https://github.com/spring-projects/spring-boot/issues/43018" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43018/hovercard">#43018</a>
* Upgrade to Spring Data Bom 2024.1.0 <a href="https://github.com/spring-projects/spring-boot/issues/43019" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43019/hovercard">#43019</a>
* Upgrade to Spring Framework 6.2.0 <a href="https://github.com/spring-projects/spring-boot/issues/43020" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43020/hovercard">#43020</a>
* Upgrade to Spring HATEOAS 2.4.0 <a href="https://github.com/spring-projects/spring-boot/issues/43021" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43021/hovercard">#43021</a>
* Upgrade to Spring Integration 6.4.0 <a href="https://github.com/spring-projects/spring-boot/issues/43022" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43022/hovercard">#43022</a>
* Upgrade to Spring Kafka 3.3.0 <a href="https://github.com/spring-projects/spring-boot/issues/43023" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43023/hovercard">#43023</a>
* Upgrade to Spring LDAP 3.2.8 <a href="https://github.com/spring-projects/spring-boot/issues/43189" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43189/hovercard">#43189</a>
* Upgrade to Spring Pulsar 1.2.0 <a href="https://github.com/spring-projects/spring-boot/issues/43024" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43024/hovercard">#43024</a>
* Upgrade to Spring RESTDocs 3.0.3 <a href="https://github.com/spring-projects/spring-boot/issues/43025" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43025/hovercard">#43025</a>
* Upgrade to Spring Security 6.4.1 <a href="https://github.com/spring-projects/spring-boot/issues/43232" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43232/hovercard">#43232</a>
* Upgrade to Spring Session 3.4.0 <a href="https://github.com/spring-projects/spring-boot/issues/43027" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43027/hovercard">#43027</a>
* Upgrade to Testcontainers 1.20.4 <a href="https://github.com/spring-projects/spring-boot/issues/43243" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43243/hovercard">#43243</a>
* Upgrade to Tomcat 10.1.33 <a href="https://github.com/spring-projects/spring-boot/issues/43134" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43134/hovercard">#43134</a>
* Upgrade to Undertow 2.3.18.Final <a href="https://github.com/spring-projects/spring-boot/issues/43166" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43166/hovercard">#43166</a>
* Upgrade to WebJars Locator Lite 1.0.1 <a href="https://github.com/spring-projects/spring-boot/issues/43135" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/43135/hovercard">#43135</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahoehma/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahoehma">@ahoehma</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/deki/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/deki">@deki</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/izeye/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/izeye">@izeye</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ngocnhan-tran1996/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ngocnhan-tran1996">@ngocnhan-tran1996</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/nosan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nosan">@nosan</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/quaff/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/quaff">@quaff</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/wickdynex/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wickdynex">@wickdynex</a>

