# v4.0.0

## release on 20251122
## description
## changes
Full <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Release-Notes">release notes for Spring Boot 4.0</a> are available on the wiki. There is also <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide">a migration guide</a> to help you upgrade from Spring Boot 3.5.

‚≠ê New Features

* Change tomcat and jetty runtime modules to starters <a href="https://github.com/spring-projects/spring-boot/issues/48175" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48175/hovercard">#48175</a>
* Rename spring-boot-kotlin-serialization to align with the name of the Kotlinx module that it pulls in <a href="https://github.com/spring-projects/spring-boot/issues/48076" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48076/hovercard">#48076</a>

üêû Bug Fixes

* Error properties are a general web concern and should not be located beneath server.* <a href="https://github.com/spring-projects/spring-boot/issues/48201" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48201/hovercard">#48201</a>
* With both Jackson 2 and 3 on the classpath, <code>@JsonTest</code> fails due to duplicate jacksonTesterFactoryBean <a href="https://github.com/spring-projects/spring-boot/issues/48198" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48198/hovercard">#48198</a>
* Gradle war task does not exclude starter POMs from lib-provided <a href="https://github.com/spring-projects/spring-boot/issues/48197" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48197/hovercard">#48197</a>
* spring.test.webclient.mockrestserviceserver.enabled is not aligned with its module's name <a href="https://github.com/spring-projects/spring-boot/issues/48193" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48193/hovercard">#48193</a>
* SslMeterBinder doesn't register metrics for dynamically added bundles if no bundles exist at bind time <a href="https://github.com/spring-projects/spring-boot/issues/48182" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48182/hovercard">#48182</a>
* Properties bound in the child management context ignore the parent's environment prefix <a href="https://github.com/spring-projects/spring-boot/issues/48177" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48177/hovercard">#48177</a>
* ssl.chain.expiry metrics doesn't update for dynamically registered SSL bundles <a href="https://github.com/spring-projects/spring-boot/issues/48171" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48171/hovercard">#48171</a>
* Starter for spring-boot-micrometer-metrics is missing <a href="https://github.com/spring-projects/spring-boot/issues/48161" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48161/hovercard">#48161</a>
* Elasticsearch client's sniffer functionality should not be enabled by default <a href="https://github.com/spring-projects/spring-boot/issues/48155" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48155/hovercard">#48155</a>
* spring-boot-starter-elasticsearch should depend on elasticsearch-java <a href="https://github.com/spring-projects/spring-boot/pull/48141" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-boot/pull/48141/hovercard">#48141</a>
* Auto-configuration exclusions are checked using a different class loader to the one that loads auto-configuration classes <a href="https://github.com/spring-projects/spring-boot/issues/48132" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48132/hovercard">#48132</a>
* New arm64 macbooks fail to bootBuildImage due to incorrect platform image <a href="https://github.com/spring-projects/spring-boot/issues/48128" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48128/hovercard">#48128</a>
* Properties for configuring an isolated JsonMapper or ObjectMapper are incorrectly named <a href="https://github.com/spring-projects/spring-boot/issues/48116" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48116/hovercard">#48116</a>
* Buildpack fails with recent Docker installs due to hardcoded version in URL <a href="https://github.com/spring-projects/spring-boot/issues/48103" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48103/hovercard">#48103</a>
* Image building may fail when specifying a platform if an image has already been built with a different platform <a href="https://github.com/spring-projects/spring-boot/issues/48099" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48099/hovercard">#48099</a>
* Default values of Kotlinx Serialization JSON configuration properties are not documented <a href="https://github.com/spring-projects/spring-boot/issues/48097" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48097/hovercard">#48097</a>
* Custom XML converters should override defaults in HttpMessageConverters <a href="https://github.com/spring-projects/spring-boot/issues/48096" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48096/hovercard">#48096</a>
* Kotlin serialization is used too aggressively when other JSON libraries are available <a href="https://github.com/spring-projects/spring-boot/issues/48070" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48070/hovercard">#48070</a>
* PortInUseException incorrectly thrown on failure to bind port due to Netty IP misconfiguration <a href="https://github.com/spring-projects/spring-boot/issues/48059" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48059/hovercard">#48059</a>
* Auto-configured JCacheMetrics cannot be customized <a href="https://github.com/spring-projects/spring-boot/issues/48057" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48057/hovercard">#48057</a>
* WebSecurityCustomizer beans are excluded by WebMvcTest <a href="https://github.com/spring-projects/spring-boot/issues/48055" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48055/hovercard">#48055</a>
* Deprecated EnvironmentPostProcessor does not resolve arguments <a href="https://github.com/spring-projects/spring-boot/issues/48047" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48047/hovercard">#48047</a>
* RetryPolicySettings should refer to maxRetries, not maxAttempts <a href="https://github.com/spring-projects/spring-boot/issues/48023" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48023/hovercard">#48023</a>
* Devtools Restarter does not work with a parameterless main method <a href="https://github.com/spring-projects/spring-boot/issues/47996" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47996/hovercard">#47996</a>
* Dependency management for Kafka should not manage Scala 2.12 libraries <a href="https://github.com/spring-projects/spring-boot/pull/47991" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-boot/pull/47991/hovercard">#47991</a>
* spring-boot-mail should depend on jakarta.mail:jakarta.mail-api and org.eclipse.angus:angus-mail instead of org.eclipse.angus:jakarta.mail <a href="https://github.com/spring-projects/spring-boot/issues/47983" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47983/hovercard">#47983</a>
* spring-boot-starter-data-mongodb-reactive has dependency on reactor-test <a href="https://github.com/spring-projects/spring-boot/issues/47982" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47982/hovercard">#47982</a>
* Support for ReactiveElasticsearchClient is in the wrong module <a href="https://github.com/spring-projects/spring-boot/issues/47848" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47848/hovercard">#47848</a>

üìî Documentation

* Removed property spring.test.webclient.register-rest-template is still documented <a href="https://github.com/spring-projects/spring-boot/issues/48199" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48199/hovercard">#48199</a>
* Mention support for detecting AWS ECS in "Deploying to the Cloud" <a href="https://github.com/spring-projects/spring-boot/pull/48170" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-boot/pull/48170/hovercard">#48170</a>
* Revise AWS section of "Deploying to the Cloud" in reference manual <a href="https://github.com/spring-projects/spring-boot/issues/48163" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48163/hovercard">#48163</a>
* Fix typo in PortInUseException Javadoc <a href="https://github.com/spring-projects/spring-boot/issues/48134" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48134/hovercard">#48134</a>
* Correct section about required setters in "Type-safe Configuration Properties" <a href="https://github.com/spring-projects/spring-boot/issues/48131" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48131/hovercard">#48131</a>
* Use since attribute in configuration properties deprecation consistently <a href="https://github.com/spring-projects/spring-boot/issues/48122" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48122/hovercard">#48122</a>
* Document EndpointJsonMapper and management.endpoints.jackson.isolated-json-mapper <a href="https://github.com/spring-projects/spring-boot/issues/48115" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48115/hovercard">#48115</a>
* Document support for configuring servlet context init parameters using properties <a href="https://github.com/spring-projects/spring-boot/issues/48112" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48112/hovercard">#48112</a>
* Some configuration properties are not documented in the appendix <a href="https://github.com/spring-projects/spring-boot/issues/48095" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48095/hovercard">#48095</a>
* Clarify how warnings about soon-to-expire SSL certificates are reported <a href="https://github.com/spring-projects/spring-boot/issues/48063" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48063/hovercard">#48063</a>
* Document how to use ContextPropagatingTaskDecorator for propagating trace context over thread boundaries <a href="https://github.com/spring-projects/spring-boot/issues/48053" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48053/hovercard">#48053</a>
* Document the level of support for the OpenTelemetry APIs <a href="https://github.com/spring-projects/spring-boot/issues/47960" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47960/hovercard">#47960</a>
* Document that you need to build with Java 25 for buildpack build-image Graal support <a href="https://github.com/spring-projects/spring-boot/issues/45501" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/45501/hovercard">#45501</a>

üî® Dependency Upgrades

* Upgrade to Cassandra Driver 4.19.2 <a href="https://github.com/spring-projects/spring-boot/issues/48184" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48184/hovercard">#48184</a>
* Upgrade to DB2 JDBC 12.1.3.0 <a href="https://github.com/spring-projects/spring-boot/issues/48087" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48087/hovercard">#48087</a>
* Upgrade to Elasticsearch Client 9.2.1 <a href="https://github.com/spring-projects/spring-boot/issues/48137" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48137/hovercard">#48137</a>
* Upgrade to GraphQL Java 25.0 <a href="https://github.com/spring-projects/spring-boot/issues/48034" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48034/hovercard">#48034</a>
* Upgrade to Hibernate 7.1.8.Final <a href="https://github.com/spring-projects/spring-boot/issues/48150" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48150/hovercard">#48150</a>
* Upgrade to Jackson Bom 3.0.2 <a href="https://github.com/spring-projects/spring-boot/issues/48089" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48089/hovercard">#48089</a>
* Upgrade to Jetty 12.1.4 <a href="https://github.com/spring-projects/spring-boot/issues/48120" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48120/hovercard">#48120</a>
* Upgrade to Jetty Reactive HTTPClient 4.1.4 <a href="https://github.com/spring-projects/spring-boot/issues/48151" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48151/hovercard">#48151</a>
* Upgrade to jOOQ 3.19.28 <a href="https://github.com/spring-projects/spring-boot/issues/48090" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48090/hovercard">#48090</a>
* Upgrade to Kafka 4.1.1 <a href="https://github.com/spring-projects/spring-boot/issues/48185" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48185/hovercard">#48185</a>
* Upgrade to Logback 1.5.21 <a href="https://github.com/spring-projects/spring-boot/issues/48091" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48091/hovercard">#48091</a>
* Upgrade to Micrometer 1.16.0 <a href="https://github.com/spring-projects/spring-boot/issues/47820" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47820/hovercard">#47820</a>
* Upgrade to Micrometer Tracing 1.6.0 <a href="https://github.com/spring-projects/spring-boot/issues/47821" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47821/hovercard">#47821</a>
* Upgrade to MySQL 9.5.0 <a href="https://github.com/spring-projects/spring-boot/issues/48092" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48092/hovercard">#48092</a>
* Upgrade to Native Build Tools Plugin 0.11.3 <a href="https://github.com/spring-projects/spring-boot/issues/48051" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48051/hovercard">#48051</a>
* Upgrade to Neo4j Java Driver 6.0.2 <a href="https://github.com/spring-projects/spring-boot/issues/47997" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47997/hovercard">#47997</a>
* Upgrade to Prometheus Client 1.4.3 <a href="https://github.com/spring-projects/spring-boot/issues/48093" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48093/hovercard">#48093</a>
* Upgrade to Reactor Bom 2025.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47822" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47822/hovercard">#47822</a>
* Upgrade to Spring AMQP 4.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47823" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47823/hovercard">#47823</a>
* Upgrade to Spring Batch 6.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47834" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47834/hovercard">#47834</a>
* Upgrade to Spring Data Bom 2025.1.0 <a href="https://github.com/spring-projects/spring-boot/issues/47824" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47824/hovercard">#47824</a>
* Upgrade to Spring Framework 7.0.1 <a href="https://github.com/spring-projects/spring-boot/issues/48168" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48168/hovercard">#48168</a>
* Upgrade to Spring GraphQL 2.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47826" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47826/hovercard">#47826</a>
* Upgrade to Spring HATEOAS 3.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47827" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47827/hovercard">#47827</a>
* Upgrade to Spring Integration 7.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47828" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47828/hovercard">#47828</a>
* Upgrade to Spring Kafka 4.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47829" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47829/hovercard">#47829</a>
* Upgrade to Spring LDAP 4.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47999" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47999/hovercard">#47999</a>
* Upgrade to Spring Pulsar 2.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47830" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47830/hovercard">#47830</a>
* Upgrade to Spring RESTDocs 4.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47831" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47831/hovercard">#47831</a>
* Upgrade to Spring Security 7.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47832" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47832/hovercard">#47832</a>
* Upgrade to Spring Session 4.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/48000" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48000/hovercard">#48000</a>
* Upgrade to Spring WS 5.0.0 <a href="https://github.com/spring-projects/spring-boot/issues/47833" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/47833/hovercard">#47833</a>
* Upgrade to Testcontainers 2.0.2 <a href="https://github.com/spring-projects/spring-boot/issues/48152" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48152/hovercard">#48152</a>
* Upgrade to Tomcat 11.0.14 <a href="https://github.com/spring-projects/spring-boot/issues/48094" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-boot/issues/48094/hovercard">#48094</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/K-jun98/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/K-jun98">@K-jun98</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/TerryTaoYY/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/TerryTaoYY">@TerryTaoYY</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/filiphr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/filiphr">@filiphr</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/hojooo/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/hojooo">@hojooo</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/linw-bai/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/linw-bai">@linw-bai</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/nosan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nosan">@nosan</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/scottfrederick/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scottfrederick">@scottfrederick</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/stevearmstrong-dev/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/stevearmstrong-dev">@stevearmstrong-dev</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/stewue/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/stewue">@stewue</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/vpavic/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vpavic">@vpavic</a>

