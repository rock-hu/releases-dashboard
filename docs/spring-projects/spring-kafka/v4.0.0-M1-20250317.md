# v4.0.0-M1

## release on 20250317

## description

## changes

‚≠ê New Features

* Polishing <a href="https://github.com/spring-projects/spring-kafka/pull/3771" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3771/hovercard">#3771</a>
* Fix block code in section Examples <a href="https://github.com/spring-projects/spring-kafka/pull/3770" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3770/hovercard">#3770</a>
* Update version antora for branch docs-build <a href="https://github.com/spring-projects/spring-kafka/pull/3769" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3769/hovercard">#3769</a>
* Improve <code>build.gradle</code> for building antora <a href="https://github.com/spring-projects/spring-kafka/pull/3768" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3768/hovercard">#3768</a>
* Improve performance of acknowledge(int index) / override createRecordList implementation <a href="https://github.com/spring-projects/spring-kafka/issues/3764" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3764/hovercard">#3764</a>
* JSpecify nullability related changes <a href="https://github.com/spring-projects/spring-kafka/issues/3762" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3762/hovercard">#3762</a>
* Adding jspecify nullability checks in transaction package <a href="https://github.com/spring-projects/spring-kafka/pull/3738" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3738/hovercard">#3738</a>
* Add jspecify based Nullability checks in spring-kafka-test module <a href="https://github.com/spring-projects/spring-kafka/pull/3737" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3737/hovercard">#3737</a>
* Configure Gradle toolchain auto-provisioning in build <a href="https://github.com/spring-projects/spring-kafka/issues/3734" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3734/hovercard">#3734</a>
* Upgrade Gradle to 8.12.1 and modernize build toolchain configuration <a href="https://github.com/spring-projects/spring-kafka/issues/3731" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3731/hovercard">#3731</a>

üêû Bug Fixes

* StreamsBuilderFactoryBean fails in a native image as org.apache.kafka.streams.errors.LogAndFailProcessingExceptionHandler cannot be loaded <a href="https://github.com/spring-projects/spring-kafka/issues/3787" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3787/hovercard">#3787</a>
* Kafka ProducerRecord may end up with duplicated trace headers <a href="https://github.com/spring-projects/spring-kafka/issues/3786" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3786/hovercard">#3786</a>
* Fix KafkaTemplate hiding exceptions when starting observation <a href="https://github.com/spring-projects/spring-kafka/pull/3779" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3779/hovercard">#3779</a>
* Handle null group id in listener observation <a href="https://github.com/spring-projects/spring-kafka/pull/3778" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3778/hovercard">#3778</a>
* Fixing race condition in MicrometerMetricsTests <a href="https://github.com/spring-projects/spring-kafka/pull/3760" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3760/hovercard">#3760</a>
* Metric collection for errors always report the same error "ListenerExecutionFailedException" regardless of what's thrown in the consumer method <a href="https://github.com/spring-projects/spring-kafka/issues/3741" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3741/hovercard">#3741</a>
* Async suspend function listener not automatically acknowledged? <a href="https://github.com/spring-projects/spring-kafka/issues/3740" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3740/hovercard">#3740</a>
* Using ConcurrentMessageListenerContainer section of reference doc is a bit confusing <a href="https://github.com/spring-projects/spring-kafka/issues/3733" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3733/hovercard">#3733</a>

üìî Documentation

* Fix typo in <code>CONTRIBUTING</code> and <code>README</code> <a href="https://github.com/spring-projects/spring-kafka/pull/3736" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3736/hovercard">#3736</a>

üî® Dependency Upgrades

* Bump io.projectreactor:reactor-bom from 2024.0.3 to 2024.0.4 <a href="https://github.com/spring-projects/spring-kafka/pull/3803" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3803/hovercard">#3803</a>
* Bump com.fasterxml.jackson:jackson-bom from 2.18.2 to 2.18.3 <a href="https://github.com/spring-projects/spring-kafka/pull/3774" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3774/hovercard">#3774</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/cfredri4/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/cfredri4">@cfredri4</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ngocnhan-tran1996/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ngocnhan-tran1996">@ngocnhan-tran1996</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sobychacko/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sobychacko">@sobychacko</a>

