# v3.3.0-M2

## release on 20240820

## description

## changes

‚≠ê New Features

* Upgrade to Spring Kafka <code>3.8.0</code> <a href="https://github.com/spring-projects/spring-kafka/issues/3416" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3416/hovercard">#3416</a>
* Error handler throws an exception on blocking retries <a href="https://github.com/spring-projects/spring-kafka/issues/3409" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3409/hovercard">#3409</a>
* Deserialization error for Acknowledgement in Spring Kafka Listener <a href="https://github.com/spring-projects/spring-kafka/issues/3400" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3400/hovercard">#3400</a>
* Use the original key in reply messages when using ReplyingKafkaTemplate and SendTo <a href="https://github.com/spring-projects/spring-kafka/issues/3395" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3395/hovercard">#3395</a>

üêû Bug Fixes

* AnnotationEnhancer always return the old attributes <a href="https://github.com/spring-projects/spring-kafka/issues/3425" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3425/hovercard">#3425</a>
* Incorrect JavaDoc for KafkaMessageHeaderAccessor.getBlockingRetryDeliveryAttempt() <a href="https://github.com/spring-projects/spring-kafka/issues/3408" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3408/hovercard">#3408</a>
* KafkaAdmin clusterId configuration is ignored when observability is enabled and bootstrap supplier is not set <a href="https://github.com/spring-projects/spring-kafka/issues/3402" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3402/hovercard">#3402</a>
* KafkaConsumer.close() no longer triggers the DefaultKafkaConsumerFactory.listener.removeConsumer() <a href="https://github.com/spring-projects/spring-kafka/issues/3375" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3375/hovercard">#3375</a>
* Revise <code>AbstractConsumerSeekAware.onPartitionsAssigned()</code> for concurreny <a href="https://github.com/spring-projects/spring-kafka/issues/3373" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3373/hovercard">#3373</a>
* Fence the MessageLisnterContainer restart once the ConcurrentMessageListenerContainer is stopped <a href="https://github.com/spring-projects/spring-kafka/issues/3371" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3371/hovercard">#3371</a>
* ConcurrentMessageListenerContainer isChildRunning API is returning false even though active MessageListenerContainer instances are processing messages. <a href="https://github.com/spring-projects/spring-kafka/issues/3338" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3338/hovercard">#3338</a>

üìî Documentation

* Fix typos in the <code>EnableKafka</code> and <code>tips.adoc</code> <a href="https://github.com/spring-projects/spring-kafka/pull/3412" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3412/hovercard">#3412</a>
* Fix retry topic documentation for class-level configuration <a href="https://github.com/spring-projects/spring-kafka/issues/3396" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3396/hovercard">#3396</a>

üî® Dependency Upgrades

* Bump org.springframework.retry:spring-retry from 2.0.7 to 2.0.8 <a href="https://github.com/spring-projects/spring-kafka/pull/3437" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3437/hovercard">#3437</a>
* Bump org.junit:junit-bom from 5.11.0-RC1 to 5.11.0 <a href="https://github.com/spring-projects/spring-kafka/pull/3436" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3436/hovercard">#3436</a>
* Bump org.springframework.data:spring-data-bom from 2024.0.2 to 2024.0.3 <a href="https://github.com/spring-projects/spring-kafka/pull/3435" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3435/hovercard">#3435</a>
* Bump org.junit:junit-bom from 5.11.0-M2 to 5.11.0-RC1 <a href="https://github.com/spring-projects/spring-kafka/pull/3405" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3405/hovercard">#3405</a>
* Bump kotlinVersion from 1.9.24 to 1.9.25 <a href="https://github.com/spring-projects/spring-kafka/pull/3383" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3383/hovercard">#3383</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/bky373/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bky373">@bky373</a> and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/chickenchickenlove/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/chickenchickenlove">@chickenchickenlove</a>

