# v3.1.3

## release on 20240319

## description

## changes

‚≠ê New Features

* fix bug at KafkaMessageListenerContainerTests.testInvokeRecordInterceptorAllSkipped() <a href="https://github.com/spring-projects/spring-kafka/issues/3094" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3094/hovercard">#3094</a>
* Align RecordInterceptor and BatchInterceptor lifecycle. <a href="https://github.com/spring-projects/spring-kafka/issues/3092" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3092/hovercard">#3092</a>
* ConcurrentMessageListenerContainer#isInExpectedState consistency problem <a href="https://github.com/spring-projects/spring-kafka/issues/3068" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3068/hovercard">#3068</a>
* Fix TestOOMError#testOOMCMLC throw ConcurrentModificationException <a href="https://github.com/spring-projects/spring-kafka/issues/3061" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3061/hovercard">#3061</a>

üêû Bug Fixes

* Failing to handle deserialization exceptions in batch listener <a href="https://github.com/spring-projects/spring-kafka/issues/3118" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3118/hovercard">#3118</a>
* <code>KafkaMessageListenerContainer</code> doesn't properly clear threadState of <code>AfterRollbackProcessor</code> <a href="https://github.com/spring-projects/spring-kafka/issues/3102" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3102/hovercard">#3102</a>
* Listener exceptions not saved to the observation <a href="https://github.com/spring-projects/spring-kafka/issues/3085" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3085/hovercard">#3085</a>
* CommonDelegatingErrorHandler does not check delegates compatibility correctly <a href="https://github.com/spring-projects/spring-kafka/issues/3062" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3062/hovercard">#3062</a>
* DefaultErrorHandler is not able to seek in case of an exception during the commit <a href="https://github.com/spring-projects/spring-kafka/issues/3060" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3060/hovercard">#3060</a>

üìî Documentation

* Remove retry-topic-lcf.adoc introduce useLegacyFactoryConfigurer <a href="https://github.com/spring-projects/spring-kafka/issues/3087" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3087/hovercard">#3087</a>

üî® Dependency Upgrades

* Bump org.springframework.data:spring-data-bom from 2023.1.3 to 2023.1.4 <a href="https://github.com/spring-projects/spring-kafka/pull/3139" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3139/hovercard">#3139</a>
* Bump org.springframework:spring-framework-bom from 6.1.4 to 6.1.5 <a href="https://github.com/spring-projects/spring-kafka/pull/3134" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3134/hovercard">#3134</a>
* Bump io.micrometer:micrometer-bom from 1.12.3 to 1.12.4 <a href="https://github.com/spring-projects/spring-kafka/pull/3132" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3132/hovercard">#3132</a>
* Bump kotlinVersion from 1.9.22 to 1.9.23 <a href="https://github.com/spring-projects/spring-kafka/pull/3131" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3131/hovercard">#3131</a>
* Bump io.micrometer:micrometer-tracing-bom from 1.2.3 to 1.2.4 <a href="https://github.com/spring-projects/spring-kafka/pull/3127" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3127/hovercard">#3127</a>
* Bump io.projectreactor:reactor-bom from 2023.0.3 to 2023.0.4 <a href="https://github.com/spring-projects/spring-kafka/pull/3125" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3125/hovercard">#3125</a>
* Bump org.apache.zookeeper:zookeeper from 3.8.3 to 3.8.4 <a href="https://github.com/spring-projects/spring-kafka/pull/3124" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3124/hovercard">#3124</a>

