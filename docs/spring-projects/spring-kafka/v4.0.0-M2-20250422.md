# v4.0.0-M2

## release on 20250422

## description

## changes

‚≠ê New Features

* Verify support for the new Consumer Rebalance protocol in Spring Kafka <a href="https://github.com/spring-projects/spring-kafka/issues/3847" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3847/hovercard">#3847</a>
* Upgrade Apache Kafka client dependencies to version 4.0.0 <a href="https://github.com/spring-projects/spring-kafka/issues/3814" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3814/hovercard">#3814</a>
* <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2932036912" data-permission-text="Title is private" data-url="https://github.com/spring-projects/spring-kafka/issues/3810" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3810/hovercard" href="https://github.com/spring-projects/spring-kafka/issues/3810">GH-3810</a> Move the logging statement after the conditional statement. <a href="https://github.com/spring-projects/spring-kafka/pull/3811" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3811/hovercard">#3811</a>
* Enable the tracing on the reply of a ReplyingKafkaTemplate <a href="https://github.com/spring-projects/spring-kafka/issues/3808" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3808/hovercard">#3808</a>
* Optimize a <code>MessagingMessageListenerAdapter</code> returning <code>null</code> from the <code>DelegatingInvocableHandler.invoke()</code> <a href="https://github.com/spring-projects/spring-kafka/issues/3697" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3697/hovercard">#3697</a>

üêû Bug Fixes

* If an Error is thrown in the application's <code>@KafkaListener</code> listener code <a href="https://github.com/spring-projects/spring-kafka/issues/3843" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3843/hovercard">#3843</a>
* KafkaOperations is missing nullable annotations <a href="https://github.com/spring-projects/spring-kafka/issues/3813" data-hovercard-type="issue" data-hovercard-url="/spring-projects/spring-kafka/issues/3813/hovercard">#3813</a>

üìî Documentation

* Fix plural words <a href="https://github.com/spring-projects/spring-kafka/pull/3842" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3842/hovercard">#3842</a>
* Fix typo document <a href="https://github.com/spring-projects/spring-kafka/pull/3824" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3824/hovercard">#3824</a>
* Update testing docs for 4.0.0 with the updates in EmbeddedKafka <a href="https://github.com/spring-projects/spring-kafka/pull/3822" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3822/hovercard">#3822</a>
* Adding whats-new section for 4.0.0 <a href="https://github.com/spring-projects/spring-kafka/pull/3821" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3821/hovercard">#3821</a>

üî® Dependency Upgrades

* Bump io.projectreactor:reactor-bom from 2024.0.4 to 2024.0.5 <a href="https://github.com/spring-projects/spring-kafka/pull/3859" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3859/hovercard">#3859</a>
* Bump org.jetbrains.kotlinx:kotlinx-coroutines-reactor from 1.10.1 to 1.10.2 <a href="https://github.com/spring-projects/spring-kafka/pull/3836" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3836/hovercard">#3836</a>
* Bump kotlinVersion from 2.1.10 to 2.1.20 <a href="https://github.com/spring-projects/spring-kafka/pull/3817" data-hovercard-type="pull_request" data-hovercard-url="/spring-projects/spring-kafka/pull/3817/hovercard">#3817</a>

‚ù§Ô∏è Contributors

Thank you to all the contributors who worked on this release:

<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ghgh415263/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ghgh415263">@ghgh415263</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ngocnhan-tran1996/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ngocnhan-tran1996">@ngocnhan-tran1996</a>, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sobychacko/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sobychacko">@sobychacko</a>, and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sullis/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sullis">@sullis</a>

