# 4.3.1

## release on 20230921
## description
## changes
<strong>Lottie 4.3.0</strong> adds many new features, including:

* Official support for SwiftUI!
* A public Core Animation <code>CALayer</code> subclass
* Support for reduced motion
* Support for drop shadow layer effects
* Support for visionOS

You can learn more about Lottie 4.3.0 in this announcement: <strong><a href="https://github.com/airbnb/lottie-ios/discussions/2189" data-hovercard-type="discussion" data-hovercard-url="/airbnb/lottie-ios/discussions/2189/hovercard">Lottie 4.3.0 now available, with official support for SwiftUI #2189</a></strong>

Lottie 4.3.1 fixes a small regression introduced by 4.3.0: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1899785235" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2193" data-hovercard-type="issue" data-hovercard-url="/airbnb/lottie-ios/issues/2193/hovercard" href="https://github.com/airbnb/lottie-ios/issues/2193">#2193</a>

New Features

* Add SwiftUI <code>LottieView</code>, which wraps UIKit <code>LottieAnimationView</code>
* Add SwiftUI <code>LottieSwitch</code>, which wraps UIKit <code>AnimatedSwitch</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1847470386" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2138" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2138/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2138">#2138</a>)
* Add SwiftUI <code>LottieButton</code>, which wraps <code>AnimatedButton</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1850655650" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2139" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2139/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2139">#2139</a>)
* <code>AnimatedSwitch</code> and <code>AnimatedButton</code> now support macOS (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1847470386" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2138" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2138/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2138">#2138</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1850655650" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2139" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2139/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2139">#2139</a>)
* Add <code>LottieAnimationLayer</code>, a Core Animation <code>CALayer</code> subclass for playing Lottie animations (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1744611989" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2073" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2073/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2073">#2073</a>)
* Add support for rendering drop shadow layer effects (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1852218167" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2142" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2142/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2142">#2142</a>)
* Add API for playing multiple markers sequentially (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1770119416" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2084" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2084/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2084">#2084</a>)
* Play "reduced motion" marker if <code>UIAccessibility.isReduceMotionEnabled</code> is true (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1805551258" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2110" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2110/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2110">#2110</a>)
* Update text provider API to use full <code>AnimationKeypath</code> values (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1893399766" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2183" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2183/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2183">#2183</a>)
* Add support for visionOS (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1863719453" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2152" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2152/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2152">#2152</a>)
* Drop support for Swift 5.5 (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1863719453" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2152" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2152/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2152">#2152</a>)
* Add contents gravity configuration to <code>AnimationImageProvider</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1890974080" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2177" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2177/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2177">#2177</a>)
* Add support for customizing stroke width values using <code>FloatValueProvider</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1892996164" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2179" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2179/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2179">#2179</a>)
* Adopt <code>Sendable</code> to support using Lottie with strict concurrency enabled (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1833758582" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2126" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2126/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2126">#2126</a>)
* Add <code>LottiePlaybackMode</code> to support declarative playback configuration (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1835763051" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2128" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2128/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2128">#2128</a>)
* Add option make main thread rendering engine force display update on every frame (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1874468998" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2168" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2168/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2168">#2168</a>)
* Add a option to prevent caching images from <code>AnimationImageProvider</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1885666048" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2171" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2171/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2171">#2171</a>)
* Add support for customizing gradient values using <code>GradientValueProvider</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1893061516" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2182" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2182/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2182">#2182</a>)
* Added additional support for multiple animations in <code>DotLottieFile</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1750023916" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2074" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2074/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2074">#2074</a>)
* Add helper method to initialize <code>DotLottieFile</code> with data (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1774972529" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2090" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2090/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2090">#2090</a>)

Bug fixes

* Remove <code>.../ZipFoundation/README.md</code> from targets and <code>*.md*</code> files from podspec (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1695706375" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2057" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2057/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2057">#2057</a>)*
* Fix issue where layers with negative X scale values could be pixelated (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1712773566" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2067" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2067/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2067">#2067</a>)
* Fix warnings when building with Swift 5.9 (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1742850273" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2072" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2072/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2072">#2072</a>)
* Restructure <code>ValueProviderStore</code> to not accumulate multiple values for the same key (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1768081382" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2082" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2082/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2082">#2082</a>)
* Disable bitcode when building XCFramework (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1824956770" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2121" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2121/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2121">#2121</a>)
* Fix unhandled file warning when building with SPM (<a href="https://github.com/airbnb/lottie-ios/pull/2132" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2132/hovercard">https://github.com/airbnb/lottie-ios/pull/213</a>)
* Fix support for customizing color of <code>SolidLayer</code> using <code>ColorValueProvider</code> (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1865724089" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2154" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2154/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2154">#2154</a>)
* Fix issue where shape items could be unexpectedly ignored (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1865946830" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2156" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2156/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2156">#2156</a>)
* Fix issue where skew keyframes would unexpectedly not animate (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1865996483" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2157" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2157/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2157">#2157</a>)
* Fix issue where value providers could be ignored when falling back to main thread rendering engine (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1872137953" data-permission-text="Title is private" data-url="https://github.com/airbnb/lottie-ios/issues/2164" data-hovercard-type="pull_request" data-hovercard-url="/airbnb/lottie-ios/pull/2164/hovercard" href="https://github.com/airbnb/lottie-ios/pull/2164">#2164</a>)

Thanks to everyone who contributed to this release!

