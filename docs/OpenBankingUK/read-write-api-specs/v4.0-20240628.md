# v4.0

## release on 20240628
## description
## changes
v4.0 - 28th June 2024

| Area | Changes |
|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| All | * <a href="https://github.com/OpenBankingUK/External_Internal_CodeSets">Enum/codeset repository</a> created on GitHub. OBL enums have been removed from namespaced enumeration page and participants should refer to this respository for values. Note, OBExternal* enum names have been updated to OBInternal* * New optional <code>StatusReason</code> array containing 0..*: * <code>StatusReasonCode</code> * <code>Path</code> * <code>StatusReasonDescription</code> * Sequence diagrams and consent status models updated with ISO values * Usage examples updated |
| All | Alignment with ISO 20022: * ISO code names replaced by code value (e.g. <code>AcceptedWithoutPosting</code> is now <code>ACWP</code>) * Address fields aligned to ISO definition and rationalised into single address definition <code>OBPostalAddress7</code>. * <code>LEI</code> added to Creditor/Debtor/CreditorAgent objects * <code>UltimateCreditor</code> and <code>UltimateDebtor</code> added * <code>MandateRelatedInformation</code> added to DirectDebit and StandingOrder, this object replaces some fields from v3.1.11 * <code>RemittanceInformation</code> object updated to ISO format, this replaces ‘reference’ in payment requests. The object name has been updated to <code>OBRemittanceInformation2</code>. * <code>CreditorAccount</code> & <code>CreditorAgent</code> now have the same (optional) fields across API endpoints * <code>Proxy</code> added to CreditorAccount/DebtorAccount (across AISP, PISP & CBPII) |
| AISP | ISO 20022 changes * <code>AccountType</code> (OBExternalAccountType1Code) renamed to <code>AccountCategory</code> (OBInternalAccountType1Code) * <code>AccountSubType</code> renamed to <code>AccountTypeCode</code> * <code>MORT</code> (Mortgage) and <code>WALT</code> (Wallet) added to OBExternalAccountSubType1Code * <code>Name</code> added to Servicer in OBReadAccount6 * <code>StatementFrequencyAndFormat</code> added to Account in OBReadAccount6 * <code>PaymentPurposeCode</code> added to Transaction in OBReadTransaction6 * <code>CategoryPurposeCode</code> added to Transaction in OBReadTransaction6 |
| PISP | ISO20022 changes * <code>CategoryPurposeCode</code> added to Risk object * <code>RemittanceInformation</code> added to payments * <code>RegulatoryReporting</code> added to payments |
| Errors | * Simplified error object, top level <code>Code</code> and <code>Message</code> have been marked as optional and <strong>deprecated</strong>. * Error codes now in ISO 20022 code value format (4 chars) in the <code>OBExternalStatusReason1Code</code> enum * Additional guidance on errors experienced in the redirect flow or from PSU initiated changes |
| VRP | * <code>ContractPresentIndicator</code> typo fixed * Added guidance on dynamic reference information for VRP payments * StatusReason now uses ExternalStatusReason1Code * To assist with version migration: * Introduced optional HTTP PUT/PATCH verbs for consents * Added payload version header |
| Payments | * Updated payment message types information to include ISO 20022 changes, CHAPS migration and CBPR+ * Richer payment status information aligned to ISO 20022 <code>ExternalTransactionStatus1code</code> |
| Various | All <a href="https://openbanking.atlassian.net/wiki/spaces/DZ/pages/47546479/Known+Specification+Issues" rel="nofollow">3.1.11 KI’s</a> addressed |
| AISP | * Added new <code>ExtendedProprietaryBankTransactionCodes</code> array to Transactions (TDA decision 264) * Permission code table updated with <code>UltimateCreditor</code>, <code>UltimateDebtor</code> and <code>StatementFrequencyAndFormat</code> |
| Various | <code>Frequency</code> in <code>OBMandateRelatedInformation1</code> object made mandatory |
| PISP | <code>CreditorAgent</code> added to * Domestic Payment Consent * Domestic Payment * File payment Consents * File payment |


